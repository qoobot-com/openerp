# 微服务前端技术栈统一更新指引

## 概述

所有 QooERP 微服务统一使用 **qooerp-frontend** 前端工程，技术栈为 **Vue 3 + TDesign (PC+Mobile) + Electron/Capacitor**。

---

## 一、更新内容模板

### 1.1 在每个微服务的 `docs/05-技术设计.md` 中添加

在技术选型章节添加以下内容：

```markdown
### 1.2 前端技术栈

| 技术组件 | 版本 | 用途 |
|---------|------|------|
| Vue 3 | 3.x | 前端框架 |
| TDesign | Latest | UI 组件库 (PC+Mobile) |
| Electron | Latest | 桌面应用打包 |
| Capacitor | Latest | 移动应用打包 |
| TypeScript | 5.x | 类型系统 |
| Axios | Latest | HTTP 客户端 |
| Pinia | Latest | 状态管理 |
| Vite | 5.x | 构建工具 |

#### 前端架构说明

本项目采用**前后端分离架构**，所有微服务统一使用 `qooerp-frontend` 作为前端工程，通过 RESTful API 调用后端服务。

**前端工程结构**：
- 前端代码仓库：`qooerp-frontend`
- API 调用示例：前端 API 文件位于 `src/api/{module}.ts`
- 统一通过 API Gateway (qooerp-gateway) 访问后端服务

**多端支持**：
- PC 端：TDesign Vue Next
- 移动端：TDesign Mobile
- 桌面应用：Electron 打包
- 移动应用：Capacitor 打包（支持 iOS/Android）

**前端 API 封装示例**：
```typescript
// qooerp-frontend/packages/web/src/api/{module}.ts
import request from '@/utils/request'

export const {module}Api = {
  // 示例：列表查询
  list: (params: Query) => {
    return request.get<PageResult>('/api/{module}/list', { params })
  },

  // 示例：创建
  create: (data: Create) => {
    return request.post<void>('/api/{module}/create', data)
  }
}
```
```

---

## 二、各微服务对应的前端 API 文件

| 微服务模块 | 前端 API 文件 | 前端 API 函数名 |
|-----------|--------------|---------------|
| qooerp-system | `src/api/system.ts` | `systemApi` |
| qooerp-auth | `src/api/auth.ts` | `authApi` |
| qooerp-user | `src/api/user.ts` | `userApi` |
| qooerp-permission | `src/api/permission.ts` | `permissionApi` |
| qooerp-organization | `src/api/organization.ts` | `organizationApi` |
| qooerp-hr | `src/api/hr.ts` | `hrApi` |
| qooerp-finance | `src/api/finance.ts` | `financeApi` |
| qooerp-crm | `src/api/crm.ts` | `crmApi` |
| qooerp-scm | `src/api/scm.ts` | `scmApi` |
| qooerp-sales | `src/api/sales.ts` | `salesApi` |
| qooerp-purchase | `src/api/purchase.ts` | `purchaseApi` |
| qooerp-inventory | `src/api/inventory.ts` | `inventoryApi` |
| qooerp-production | `src/api/production.ts` | `productionApi` |
| qooerp-monitor | `src/api/monitor.ts` | `monitorApi` |
| qooerp-file | `src/api/file.ts` | `fileApi` |
| qooerp-message | `src/api/message.ts` | `messageApi` |
| qooerp-workflow | `src/api/workflow.ts` | `workflowApi` |
| qooerp-notify | `src/api/notify.ts` | `notifyApi` |

---

## 三、更新状态

### 3.1 已更新

| 序号 | 微服务模块 | 文件路径 | 状态 |
|------|-----------|---------|------|
| 1 | qooerp-system | `qooerp-system/docs/05-技术设计.md` | ✅ 已更新 |
| 2 | qooerp-user | `qooerp-user/docs/05-技术设计.md` | ✅ 已更新 |
| 3 | qooerp-monitor | `qooerp-monitor/docs/05-技术设计.md` | ✅ 已更新 |

### 3.2 待更新

| 序号 | 微服务模块 | 文件路径 | 状态 |
|------|-----------|---------|------|
| 1 | qooerp-organization | `qooerp-organization/docs/05-技术设计.md` | ⏳ 待更新 |
| 2 | qooerp-hr | `qooerp-hr/docs/05-技术设计.md` | ⏳ 待更新 |
| 3 | qooerp-finance | `qooerp-finance/docs/05-技术设计.md` | ⏳ 待更新 |
| 4 | qooerp-crm | `qooerp-crm/docs/05-技术设计.md` | ⏳ 待更新 |
| 5 | qooerp-scm | `qooerp-scm/docs/05-技术设计.md` | ⏳ 待更新 |
| 6 | qooerp-sales | `qooerp-sales/docs/05-技术设计.md` | ⏳ 待更新 |
| 7 | qooerp-purchase | `qooerp-purchase/docs/05-技术设计.md` | ⏳ 待更新 |
| 8 | qooerp-inventory | `qooerp-inventory/docs/05-技术设计.md` | ⏳ 待更新 |
| 9 | qooerp-production | `qooerp-production/docs/05-技术设计.md` | ⏳ 待更新 |
| 10 | qooerp-file | `qooerp-file/docs/05-技术设计.md` | ⏳ 待更新 |
| 11 | qooerp-message | `qooerp-message/docs/05-技术设计.md` | ⏳ 待更新 |
| 12 | qooerp-workflow | `qooerp-workflow/docs/05-技术设计.md` | ⏳ 待更新 |
| 13 | qooerp-notify | `qooerp-notify/docs/05-技术设计.md` | ⏳ 待更新 |

### 3.3 文件不存在（需创建）

| 序号 | 微服务模块 | 文件路径 | 状态 |
|------|-----------|---------|------|
| 1 | qooerp-auth | `qooerp-auth/docs/05-技术设计.md` | ❌ 需创建 |
| 2 | qooerp-permission | `qooerp-permission/docs/05-技术设计.md` | ❌ 需创建 |

---

## 四、快速更新脚本

### 4.1 替换说明

在每个微服务的 `docs/05-技术设计.md` 中：

1. 找到 `### 1.2 依赖模块` 章节
2. 在其之前插入 "### 1.2 前端技术栈" 章节
3. 将原来的 `### 1.2 依赖模块` 改为 `### 1.3 依赖模块`

### 4.2 批量替换（如果需要）

可以使用以下脚本批量更新：

```bash
#!/bin/bash

# 微服务列表
modules=("qooerp-organization" "qooerp-hr" "qooerp-finance" "qooerp-crm" "qooerp-scm" "qooerp-sales" "qooerp-purchase" "qooerp-inventory" "qooerp-production" "qooerp-file" "qooerp-message" "qooerp-workflow" "qooerp-notify")

for module in "${modules[@]}"; do
  file="${module}/docs/05-技术设计.md"
  if [ -f "$file" ]; then
    echo "更新 $file"
    # 使用 sed 替换（需要根据实际文件调整）
  fi
done
```

---

## 五、相关文档

- [微服务架构设计.md](./微服务架构设计.md)
- [前端架构设计.md](./前端架构设计.md)
- [监控架构设计.md](./监控架构设计.md)

---

**文档版本**: v1.0
**更新日期**: 20xx-xx-xx

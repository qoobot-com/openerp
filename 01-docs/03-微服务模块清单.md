# QooERP 微服务模块清单

> 版本：v2.0
> 创建日期：20xx-xx-xx
> 更新日期：20xx-xx-xx
> 架构模式：双模式部署（All-In-One + 微服务）

---

## 一、概述

### 1.1 架构设计原则

QooERP 采用**模块化单体 + 微服务双模式架构**：

- **模块化结构**：每个服务分为 `*-service`（业务逻辑）和 `*-start`（启动模块）
- **双模式部署**：
  - **All-In-One 模式**：`qooerp-all-start` 聚合所有 `*-service`，适合小微企业、快速开发
  - **微服务模式**：每个 `*-start` 独立部署，适合中大型企业、生产环境
- **渐进式演进**：从单体模式平滑演进到微服务模式

### 1.2 目录结构

```
qooerp/
├── qooerp-common/                  # 公共模块
│   └── pom.xml
├── qooerp-gateway/                 # API 网关
│   ├── qooerp-gateway-service/
│   └── qooerp-gateway-start/
├── qooerp-auth/                    # 认证服务
│   ├── qooerp-auth-service/
│   └── qooerp-auth-start/
├── qooerp-system/                  # 系统管理
│   ├── qooerp-system-service/
│   └── qooerp-system-start/
├── qooerp-organization/            # 组织管理
│   ├── qooerp-organization-service/
│   └── qooerp-organization-start/
├── qooerp-user/                    # 用户管理
│   ├── qooerp-user-service/
│   └── qooerp-user-start/
├── qooerp-permission/              # 权限管理
│   ├── qooerp-permission-service/
│   └── qooerp-permission-start/
├── qooerp-hr/                      # 人力资源
│   ├── qooerp-hr-service/
│   └── qooerp-hr-start/
├── qooerp-finance/                 # 财务管理
│   ├── qooerp-finance-service/
│   └── qooerp-finance-start/
├── qooerp-scm/                     # 供应链管理
│   ├── qooerp-scm-service/
│   └── qooerp-scm-start/
├── qooerp-sales/                   # 销售管理
│   ├── qooerp-sales-service/
│   └── qooerp-sales-start/
├── qooerp-inventory/               # 库存管理
│   ├── qooerp-inventory-service/
│   └── qooerp-inventory-start/
├── qooerp-purchase/                # 采购管理
│   ├── qooerp-purchase-service/
│   └── qooerp-purchase-start/
├── qooerp-production/              # 生产管理
│   ├── qooerp-production-service/
│   └── qooerp-production-start/
├── qooerp-project/                 # 项目管理
│   ├── qooerp-project-service/
│   └── qooerp-project-start/
├── qooerp-crm/                     # 客户关系管理
│   ├── qooerp-crm-service/
│   └── qooerp-crm-start/
├── qooerp-workflow/                # 工作流引擎
│   ├── qooerp-workflow-service/
│   └── qooerp-workflow-start/
├── qooerp-report/                  # 报表与分析
│   ├── qooerp-report-service/
│   └── qooerp-report-start/
├── qooerp-file/                    # 文件服务
│   ├── qooerp-file-service/
│   └── qooerp-file-start/
├── qooerp-message/                 # 消息服务
│   ├── qooerp-message-service/
│   └── qooerp-message-start/
├── qooerp-notify/                  # 通知服务
│   ├── qooerp-notify-service/
│   └── qooerp-notify-start/
├── qooerp-scheduler/               # 任务调度
│   ├── qooerp-scheduler-service/
│   └── qooerp-scheduler-start/
├── qooerp-monitor/                 # 监控服务
│   ├── qooerp-monitor-service/
│   └── qooerp-monitor-start/
├── qooerp-ai/                      # AI 智能服务
│   ├── qooerp-ai-service/
│   └── qooerp-ai-start/
└── qooerp-all/                     # All-In-One 聚合服务
    └── qooerp-all-start/
```

---

## 二、微服务列表

### 2.1 P0 级：核心基础服务（必选）

#### 2.1.1 qooerp-gateway（API 网关）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-gateway |
| **服务描述** | API 网关，统一流量入口 |
| **功能模块** | 路由转发、限流熔断、统一鉴权、请求日志 |
| **依赖服务** | qooerp-auth（鉴权）、qooerp-monitor（日志） |
| **端口** | 8080 |
| **部署模式** | 微服务模式专用（All-In-One 模式不需要） |
| **优先级** | P0-A（核心基础） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 路由转发（基于 Spring Cloud Gateway）
- 统一鉴权（JWT 令牌验证）
- 限流熔断（Sentinel 集成）
- 请求日志（访问日志、响应日志）
- 灰度发布（支持版本路由）

---

#### 2.1.2 qooerp-auth（认证服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-auth |
| **服务描述** | 身份认证与授权 |
| **功能模块** | 用户登录、SSO、JWT 令牌管理、MFA 验证 |
| **依赖服务** | qooerp-user（用户信息）、qooerp-permission（权限） |
| **端口** | 8081 |
| **数据库** | qooerp_auth |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P0-A（核心基础） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 用户登录（用户名/密码、手机号/验证码）
- SSO 单点登录（OAuth2.0/OIDC）
- JWT 令牌管理（生成、验证、刷新、吊销）
- MFA 多因素认证（短信验证码、TOTP）
- 第三方登录（微信、钉钉、企业微信）

**API 接口：**
```
POST /api/auth/login              # 用户登录
POST /api/auth/logout             # 用户登出
POST /api/auth/refresh            # 刷新令牌
POST /api/auth/sso                # SSO 登录
POST /api/auth/mfa/send           # 发送 MFA 验证码
POST /api/auth/mfa/verify         # 验证 MFA
POST /api/auth/thirdparty/weixin  # 微信登录
```

---

#### 2.1.3 qooerp-system（系统管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-system |
| **服务描述** | 系统配置与监控 |
| **功能模块** | 系统配置、日志管理、监控告警、健康检查 |
| **依赖服务** | 无 |
| **端口** | 8082 |
| **数据库** | qooerp_system |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P0-B（核心基础） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 系统配置（参数管理、配置导入导出）
- 日志管理（日志收集、查询、分析）
- 系统监控（性能监控、应用监控、业务监控）
- 健康检查（服务健康检测、故障检测）
- 版本管理（版本控制、升级回滚）

**API 接口：**
```
GET /api/system/config            # 获取系统配置
PUT /api/system/config            # 更新系统配置
GET /api/system/logs              # 查询日志
GET /api/system/monitor           # 获取监控指标
GET /api/system/health            # 健康检查
```

---

#### 2.1.4 qooerp-organization（组织管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-organization |
| **服务描述** | 组织架构管理 |
| **功能模块** | 组织管理、部门管理、岗位管理 |
| **依赖服务** | qooerp-user（用户关联） |
| **端口** | 8083 |
| **数据库** | qooerp_organization |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P0-C（核心基础） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 组织管理（公司、集团、子公司）
- 部门管理（部门树、部门层级）
- 岗位管理（岗位定义、岗位层级）
- 组织关系（组织树、部门岗位关系）

**API 接口：**
```
GET /api/org/organizations        # 获取组织列表
POST /api/org/organizations       # 创建组织
GET /api/org/departments          # 获取部门树
POST /api/org/departments         # 创建部门
GET /api/org/positions            # 获取岗位列表
POST /api/org/positions           # 创建岗位
```

---

#### 2.1.5 qooerp-user（用户管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-user |
| **服务描述** | 用户管理 |
| **功能模块** | 用户管理、用户角色、用户组织 |
| **依赖服务** | qooerp-organization（组织关联）、qooerp-permission（权限关联） |
| **端口** | 8084 |
| **数据库** | qooerp_user |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P0-C（核心基础） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 用户管理（用户 CRUD、用户查询）
- 用户角色（用户角色分配、用户角色查询）
- 用户组织（用户部门关联、用户岗位关联）
- 用户状态（启用/禁用、锁定/解锁）

**API 接口：**
```
GET /api/user/users               # 获取用户列表
POST /api/user/users              # 创建用户
GET /api/user/users/{id}          # 获取用户详情
PUT /api/user/users/{id}          # 更新用户
DELETE /api/user/users/{id}       # 删除用户
GET /api/user/users/{id}/roles    # 获取用户角色
POST /api/user/users/{id}/roles   # 分配角色
```

---

#### 2.1.6 qooerp-permission（权限管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-permission |
| **服务描述** | 权限管理 |
| **功能模块** | 角色管理、权限管理、数据权限、审计日志 |
| **依赖服务** | qooerp-system（审计日志） |
| **端口** | 8085 |
| **数据库** | qooerp_permission |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P0-A（核心基础） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 角色管理（角色 CRUD、角色权限）
- 权限管理（菜单权限、按钮权限）
- RBAC 权限（基于角色的访问控制）
- ABAC 权限（基于属性的访问控制）
- 数据权限（行级权限、列级权限、字段级权限）
- 审计日志（操作日志、审计追踪、合规报告）

**API 接口：**
```
GET /api/permission/roles         # 获取角色列表
POST /api/permission/roles        # 创建角色
GET /api/permission/permissions   # 获取权限列表
GET /api/permission/check         # 权限检查
GET /api/permission/data         # 数据权限查询
GET /api/permission/audit        # 审计日志
```

---

### 2.2 P1 级：核心业务服务（核心业务必须）

#### 2.2.1 qooerp-hr（人力资源）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-hr |
| **服务描述** | 人力资源管理 |
| **功能模块** | 员工管理、考勤管理、薪资管理、绩效管理 |
| **依赖服务** | qooerp-user（用户）、qooerp-organization（组织） |
| **端口** | 8086 |
| **数据库** | qooerp_hr |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P1-A（核心业务） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 员工管理（员工档案、入职离职、转岗调薪）
- 考勤管理（打卡、请假、加班、出差）
- 薪资管理（薪资计算、薪资发放、个税申报）
- 绩效管理（绩效考核、绩效评估、绩效改进）

**API 接口：**
```
GET /api/hr/employees             # 获取员工列表
POST /api/hr/employees            # 创建员工
GET /api/hr/attendance            # 考勤记录
POST /api/hr/attendance/checkin   # 打卡
GET /api/hr/salary                # 薪资查询
GET /api/hr/performance           # 绩效查询
```

---

#### 2.2.2 qooerp-finance（财务管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-finance |
| **服务描述** | 财务管理 |
| **功能模块** | 总账管理、应收应付、资产管理、财务报表 |
| **依赖服务** | qooerp-sales（应收）、qooerp-purchase（应付） |
| **端口** | 8087 |
| **数据库** | qooerp_finance |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P1-A（核心业务） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 总账管理（凭证管理、账簿查询、期末结账）
- 应收管理（应收账款、收款、发票）
- 应付管理（应付账款、付款、发票）
- 资产管理（固定资产、资产折旧）
- 财务报表（资产负债表、利润表、现金流量表）

**API 接口：**
```
GET /api/finance/vouchers         # 凭证列表
POST /api/finance/vouchers        # 创建凭证
GET /api/finance/receivables      # 应收账款
POST /api/finance/receipts        # 收款
GET /api/finance/payables         # 应付账款
POST /api/finance/payments        # 付款
GET /api/finance/reports/balance  # 资产负债表
```

---

#### 2.2.3 qooerp-scm（供应链管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-scm |
| **服务描述** | 供应链管理 |
| **功能模块** | 供应商管理、客户管理、物流管理 |
| **依赖服务** | qooerp-purchase（采购）、qooerp-sales（销售） |
| **端口** | 8088 |
| **数据库** | qooerp_scm |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P1-B（核心业务） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 供应商管理（供应商档案、供应商评估）
- 客户管理（客户档案、客户分级）
- 物流管理（物流跟踪、物流费用）

**API 接口：**
```
GET /api/scm/suppliers            # 供应商列表
POST /api/scm/suppliers           # 创建供应商
GET /api/scm/customers            # 客户列表
POST /api/scm/customers           # 创建客户
GET /api/scm/logistics            # 物流查询
```

---

#### 2.2.4 qooerp-sales（销售管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-sales |
| **服务描述** | 销售管理 |
| **功能模块** | 销售订单、销售发货、销售退货、销售报表 |
| **依赖服务** | qooerp-inventory（库存）、qooerp-scm（客户）、qooerp-finance（应收） |
| **端口** | 8089 |
| **数据库** | qooerp_sales |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P1-B（核心业务） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 销售订单（订单创建、订单审核、订单发货）
- 销售发货（发货单、物流跟踪）
- 销售退货（退货申请、退货处理）
- 销售报表（销售统计、销售分析）

**API 接口：**
```
GET /api/sales/orders             # 销售订单列表
POST /api/sales/orders            # 创建销售订单
POST /api/sales/orders/{id}/ship  # 订单发货
GET /api/sales/deliveries         # 发货单列表
POST /api/sales/returns           # 销售退货
GET /api/sales/reports            # 销售报表
```

---

#### 2.2.5 qooerp-inventory（库存管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-inventory |
| **服务描述** | 库存管理 |
| **功能模块** | 物料管理、库存查询、库存调拨、库存盘点 |
| **依赖服务** | qooerp-purchase（入库）、qooerp-sales（出库） |
| **端口** | 8090 |
| **数据库** | qooerp_inventory |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P1-B（核心业务） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 物料管理（物料档案、物料分类）
- 库存查询（库存数量、库存明细）
- 库存调拨（调拨单、调拨处理）
- 库存盘点（盘点单、盘点处理）

**API 接口：**
```
GET /api/inventory/materials      # 物料列表
POST /api/inventory/materials     # 创建物料
GET /api/inventory/stocks        # 库存查询
POST /api/inventory/transfers     # 库存调拨
POST /api/inventory/checks        # 库存盘点
```

---

#### 2.2.6 qooerp-purchase（采购管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-purchase |
| **服务描述** | 采购管理 |
| **功能模块** | 采购订单、采购入库、采购退货、采购报表 |
| **依赖服务** | qooerp-inventory（库存）、qooerp-scm（供应商）、qooerp-finance（应付） |
| **端口** | 8091 |
| **数据库** | qooerp_purchase |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P1-B（核心业务） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 采购订单（订单创建、订单审核、订单收货）
- 采购入库（入库单、入库处理）
- 采购退货（退货申请、退货处理）
- 采购报表（采购统计、采购分析）

**API 接口：**
```
GET /api/purchase/orders          # 采购订单列表
POST /api/purchase/orders         # 创建采购订单
POST /api/purchase/orders/{id}/receive  # 订单收货
GET /api/purchase/receipts        # 入库单列表
POST /api/purchase/returns        # 采购退货
GET /api/purchase/reports         # 采购报表
```

---

### 2.3 P2 级：扩展业务服务（按需开发）

#### 2.3.1 qooerp-production（生产管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-production |
| **服务描述** | 生产管理 |
| **功能模块** | 生产计划、生产订单、生产领料、生产入库 |
| **依赖服务** | qooerp-inventory（库存）、qooerp-sales（订单） |
| **端口** | 8092 |
| **数据库** | qooerp_production |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P2-A（扩展业务） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 生产计划（生产计划、物料需求）
- 生产订单（生产订单、生产进度）
- 生产领料（领料单、领料处理）
- 生产入库（生产入库、入库处理）

**API 接口：**
```
GET /api/production/plans         # 生产计划列表
POST /api/production/plans        # 创建生产计划
GET /api/production/orders        # 生产订单列表
POST /api/production/orders       # 创建生产订单
GET /api/production/materials     # 生产领料
GET /api/production/receipts      # 生产入库
```

---

#### 2.3.2 qooerp-project（项目管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-project |
| **服务描述** | 项目管理 |
| **功能模块** | 项目管理、任务管理、里程碑、项目报表 |
| **依赖服务** | qooerp-user（人员）、qooerp-workflow（审批） |
| **端口** | 8093 |
| **数据库** | qooerp_project |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P2-B（扩展业务） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 项目管理（项目创建、项目进度、项目结项）
- 任务管理（任务分配、任务跟踪、任务完成）
- 里程碑（里程碑定义、里程碑跟踪）
- 项目报表（项目统计、项目分析）

**API 接口：**
```
GET /api/project/projects         # 项目列表
POST /api/project/projects        # 创建项目
GET /api/project/tasks            # 任务列表
POST /api/project/tasks           # 创建任务
GET /api/project/milestones       # 里程碑列表
GET /api/project/reports          # 项目报表
```

---

#### 2.3.3 qooerp-crm（客户关系管理）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-crm |
| **服务描述** | 客户关系管理 |
| **功能模块** | 客户管理、商机管理、合同管理、客户服务 |
| **依赖服务** | qooerp-sales（销售）、qooerp-scm（客户） |
| **端口** | 8094 |
| **数据库** | qooerp_crm |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P2-B（扩展业务） |
| **状态** | ✅ 设计文档已完成 |
| **文档状态** | 01-业务设计.md ✅ / 02-应用设计.md ✅ / 03-数据设计.md ✅ / 04-API接口文档.md ✅ / 05-技术设计.md ✅ / 05-数据库脚本.sql ✅ |

**核心功能：**
- 客户管理（客户档案、客户跟进）
- 商机管理（商机创建、商机跟进、商机转化）
- 合同管理（合同创建、合同审核、合同执行）
- 客户服务（服务请求、服务记录）

**API 接口：**
```
GET /api/crm/customers            # 客户列表
POST /api/crm/customers           # 创建客户
GET /api/crm/opportunities        # 商机列表
POST /api/crm/opportunities       # 创建商机
GET /api/crm/contracts            # 合同列表
POST /api/crm/contracts           # 创建合同
GET /api/crm/services             # 服务记录
```

---

### 2.4 P3 级：高级功能服务（增强能力）

#### 2.4.1 qooerp-workflow（工作流引擎）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-workflow |
| **服务描述** | 工作流引擎 |
| **功能模块** | 流程定义、流程实例、流程审批、流程监控 |
| **依赖服务** | qooerp-user（审批人）、qooerp-notify（通知） |
| **端口** | 8095 |
| **数据库** | qooerp_workflow |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-A（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 流程定义（BPMN 设计、流程发布）
- 流程实例（流程启动、流程执行、流程完成）
- 流程审批（审批任务、审批通过、审批驳回）
- 流程监控（流程查询、流程统计）

**API 接口：**
```
GET /api/workflow/definitions     # 流程定义列表
POST /api/workflow/definitions    # 发布流程
POST /api/workflow/instances      # 启动流程
GET /api/workflow/tasks           # 待办任务列表
POST /api/workflow/tasks/{id}/approve   # 审批通过
POST /api/workflow/tasks/{id}/reject    # 审批驳回
```

---

#### 2.4.2 qooerp-report（报表与分析）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-report |
| **服务描述** | 报表与分析 |
| **功能模块** | 报表管理、数据统计、数据分析、数据可视化 |
| **依赖服务** | 所有业务服务（数据源） |
| **端口** | 8096 |
| **数据库** | qooerp_report |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-A（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 报表管理（报表设计、报表发布、报表订阅）
- 数据统计（业务统计、数据汇总）
- 数据分析（趋势分析、对比分析）
- 数据可视化（图表展示、仪表盘）

**API 接口：**
```
GET /api/report/reports           # 报表列表
POST /api/report/reports          # 创建报表
GET /api/report/reports/{id}/data # 报表数据
GET /api/report/dashboards        # 仪表盘列表
GET /api/statistics/business      # 业务统计
```

---

#### 2.4.3 qooerp-file（文件服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-file |
| **服务描述** | 文件服务 |
| **功能模块** | 文件上传、文件下载、文件预览、文件管理 |
| **依赖服务** | MinIO（对象存储） |
| **端口** | 8097 |
| **数据库** | qooerp_file |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-B（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 文件上传（单文件上传、多文件上传）
- 文件下载（文件下载、批量下载）
- 文件预览（图片预览、文档预览）
- 文件管理（文件删除、文件分享）

**API 接口：**
```
POST /api/file/upload             # 文件上传
GET /api/file/download/{id}       # 文件下载
GET /api/file/preview/{id}        # 文件预览
DELETE /api/file/{id}             # 删除文件
GET /api/file/share/{id}          # 文件分享
```

---

#### 2.4.4 qooerp-message（消息服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-message |
| **服务描述** | 消息服务 |
| **功能模块** | 消息发送、消息接收、消息管理 |
| **依赖服务** | RocketMQ（消息队列） |
| **端口** | 8098 |
| **数据库** | qooerp_message |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-B（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 消息发送（系统消息、业务消息、通知消息）
- 消息接收（消息列表、未读消息）
- 消息管理（消息已读、消息删除）

**API 接口：**
```
POST /api/message/send            # 发送消息
GET /api/message/list             # 消息列表
GET /api/message/unread           # 未读消息
POST /api/message/read/{id}       # 标记已读
DELETE /api/message/{id}          # 删除消息
```

---

#### 2.4.5 qooerp-notify（通知服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-notify |
| **服务描述** | 通知服务 |
| **功能模块** | 邮件通知、短信通知、站内通知、推送通知 |
| **依赖服务** | qooerp-message（消息） |
| **端口** | 8099 |
| **数据库** | qooerp_notify |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-B（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 邮件通知（邮件发送、邮件模板）
- 短信通知（短信发送、短信模板）
- 站内通知（站内消息、系统公告）
- 推送通知（APP 推送、浏览器推送）

**API 接口：**
```
POST /api/notify/email             # 发送邮件
POST /api/notify/sms              # 发送短信
POST /api/notify/inbox            # 发送站内通知
POST /api/notify/push             # 发送推送通知
```

---

#### 2.4.6 qooerp-scheduler（任务调度）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-scheduler |
| **服务描述** | 任务调度 |
| **功能模块** | 定时任务、任务监控、任务日志 |
| **依赖服务** | XXL-JOB 或 Spring Task |
| **端口** | 8100 |
| **数据库** | qooerp_scheduler |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-C（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 定时任务（任务创建、任务执行、任务调度）
- 任务监控（任务状态、任务日志）
- 任务管理（任务启动、任务停止、任务删除）

**API 接口：**
```
GET /api/scheduler/jobs           # 任务列表
POST /api/scheduler/jobs          # 创建任务
POST /api/scheduler/jobs/{id}/start    # 启动任务
POST /api/scheduler/jobs/{id}/stop     # 停止任务
GET /api/scheduler/jobs/{id}/logs      # 任务日志
```

---

#### 2.4.7 qooerp-monitor（监控服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-monitor |
| **服务描述** | 监控服务 |
| **功能模块** | 服务监控、性能监控、链路追踪、告警管理 |
| **依赖服务** | Prometheus、Grafana、OpenTelemetry |
| **端口** | 8101 |
| **数据库** | qooerp_monitor |
| **部署模式** | 微服务模式专用（All-In-One 模式不需要） |
| **优先级** | P3-C（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 服务监控（服务状态、服务健康）
- 性能监控（CPU、内存、磁盘、网络）
- 链路追踪（调用链、性能分析）
- 告警管理（告警规则、告警通知）

**API 接口：**
```
GET /api/monitor/services         # 服务列表
GET /api/monitor/metrics          # 监控指标
GET /api/monitor/trace/{id}       # 链路追踪
GET /api/monitor/alerts           # 告警列表
```

---

#### 2.4.8 qooerp-ai（AI 智能服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-ai |
| **服务描述** | AI 智能服务 |
| **功能模块** | 智能推荐、智能预测、智能客服、智能报表 |
| **依赖服务** | Spring AI、LangChain4J、pgvector |
| **端口** | 8102 |
| **数据库** | qooerp_ai |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-D（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 智能推荐（商品推荐、流程推荐）
- 智能预测（销售预测、库存预测）
- 智能客服（问答系统、智能客服）
- 智能报表（报表生成、数据分析）

**API 接口：**
```
POST /api/ai/recommend            # 智能推荐
POST /api/ai/predict              # 智能预测
POST /api/ai/chat                 # 智能问答
POST /api/ai/report/generate      # 智能报表
```

---

### 2.5 聚合服务（All-In-One 模式）

#### 2.5.1 qooerp-all（All-In-One 聚合服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-all |
| **服务描述** | All-In-One 聚合服务 |
| **功能模块** | 聚合所有 *-service 模块 |
| **依赖服务** | 所有 *-service 模块 |
| **端口** | 8080 |
| **数据库** | qooerp_all（单库模式） |
| **部署模式** | All-In-One 模式专用 |
| **优先级** | P0（基础服务） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 聚合所有业务服务
- 单库模式（避免分布式事务复杂度）
- 单点部署（简化部署）
- 快速开发（本地开发调试）

**启动类：**
```java
@SpringBootApplication(
    scanBasePackages = {
        "com.qoobot.qooerp.auth",
        "com.qoobot.qooerp.system",
        "com.qoobot.qooerp.organization",
        "com.qoobot.qooerp.user",
        "com.qoobot.qooerp.permission",
        "com.qoobot.qooerp.hr",
        "com.qoobot.qooerp.finance",
        "com.qoobot.qooerp.scm",
        "com.qoobot.qooerp.sales",
        "com.qoobot.qooerp.inventory",
        "com.qoobot.qooerp.purchase",
        "com.qoobot.qooerp.production",
        "com.qoobot.qooerp.project",
        "com.qoobot.qooerp.crm",
        "com.qoobot.qooerp.workflow",
        "com.qoobot.qooerp.report",
        "com.qoobot.qooerp.file",
        "com.qoobot.qooerp.message",
        "com.qoobot.qooerp.notify",
        "com.qoobot.qooerp.scheduler",
        "com.qoobot.qooerp.ai"
    }
)
public class AllApplication {
    public static void main(String[] args) {
        SpringApplication.run(AllApplication.class, args);
    }
}
```

---

## 三、微服务依赖关系图

```
qooerp-gateway (API网关)
    ↓
    ├── qooerp-auth (认证)
    │   ├── qooerp-user
    │   └── qooerp-permission
    │
    ├── qooerp-system (系统管理)
    │
    ├── qooerp-organization (组织管理)
    │   └── qooerp-user
    │
    ├── qooerp-user (用户管理)
    │   ├── qooerp-organization
    │   └── qooerp-permission
    │
    ├── qooerp-permission (权限管理)
    │   └── qooerp-system
    │
    ├── qooerp-hr (人力资源)
    │   ├── qooerp-user
    │   └── qooerp-organization
    │
    ├── qooerp-finance (财务管理)
    │   ├── qooerp-sales
    │   └── qooerp-purchase
    │
    ├── qooerp-scm (供应链管理)
    │   ├── qooerp-purchase
    │   └── qooerp-sales
    │
    ├── qooerp-sales (销售管理)
    │   ├── qooerp-inventory
    │   ├── qooerp-scm
    │   └── qooerp-finance
    │
    ├── qooerp-inventory (库存管理)
    │   ├── qooerp-purchase
    │   └── qooerp-sales
    │
    ├── qooerp-purchase (采购管理)
    │   ├── qooerp-inventory
    │   ├── qooerp-scm
    │   └── qooerp-finance
    │
    ├── qooerp-production (生产管理)
    │   ├── qooerp-inventory
    │   └── qooerp-sales
    │
    ├── qooerp-project (项目管理)
    │   ├── qooerp-user
    │   └── qooerp-workflow
    │
    ├── qooerp-crm (客户关系管理)
    │   ├── qooerp-sales
    │   └── qooerp-scm
    │
    ├── qooerp-workflow (工作流引擎)
    │   ├── qooerp-user
    │   └── qooerp-notify
    │
    ├── qooerp-report (报表与分析)
    │   └── 所有业务服务
    │
    ├── qooerp-file (文件服务)
    │   └── MinIO
    │
    ├── qooerp-message (消息服务)
    │   └── RocketMQ
    │
    ├── qooerp-notify (通知服务)
    │   └── qooerp-message
    │
    ├── qooerp-scheduler (任务调度)
    │   └── XXL-JOB/Spring Task
    │
    ├── qooerp-monitor (监控服务)
    │   ├── Prometheus
    │   ├── Grafana
    │   └── OpenTelemetry
    │
    └── qooerp-ai (AI智能服务)
        ├── Spring AI
        ├── LangChain4J
        └── pgvector
```

---

## 四、部署方案对比

### 4.1 All-In-One 模式（小微企业）

| 服务名称 | 部署方式 | 端口 | 说明 |
|---------|---------|------|------|
| qooerp-all | 单个JAR | 8080 | 聚合所有服务 |

**部署命令：**
```bash
cd qooerp-all/qooerp-all-start
mvn clean package
java -jar target/qooerp-all-start-1.0.0.jar --spring.profiles.active=all
```

**适用场景：**
- 小微企业（100-500用户）
- 快速开发、POC验证
- 本地开发调试

---

### 4.2 微服务模式（中大型企业）

| 服务名称 | 部署方式 | 端口 | 说明 |
|---------|---------|------|------|
| qooerp-gateway | 独立JAR | 8080 | API网关 |
| qooerp-auth | 独立JAR | 8081 | 认证服务 |
| qooerp-system | 独立JAR | 8082 | 系统管理 |
| qooerp-organization | 独立JAR | 8083 | 组织管理 |
| qooerp-user | 独立JAR | 8084 | 用户管理 |
| qooerp-permission | 独立JAR | 8085 | 权限管理 |
| qooerp-hr | 独立JAR | 8086 | 人力资源 |
| qooerp-finance | 独立JAR | 8087 | 财务管理 |
| qooerp-scm | 独立JAR | 8088 | 供应链管理 |
| qooerp-sales | 独立JAR | 8089 | 销售管理 |
| qooerp-inventory | 独立JAR | 8090 | 库存管理 |
| qooerp-purchase | 独立JAR | 8091 | 采购管理 |
| qooerp-production | 独立JAR | 8092 | 生产管理 |
| qooerp-project | 独立JAR | 8093 | 项目管理 |
| qooerp-crm | 独立JAR | 8094 | 客户关系管理 |
| qooerp-workflow | 独立JAR | 8095 | 工作流引擎 |
| qooerp-report | 独立JAR | 8096 | 报表与分析 |
| qooerp-file | 独立JAR | 8097 | 文件服务 |
| qooerp-message | 独立JAR | 8098 | 消息服务 |
| qooerp-notify | 独立JAR | 8099 | 通知服务 |
| qooerp-scheduler | 独立JAR | 8100 | 任务调度 |
| qooerp-monitor | 独立JAR | 8101 | 监控服务 |
| qooerp-ai | 独立JAR | 8102 | AI智能服务 |

**部署命令：**
```bash
# 依次启动所有服务
for service in gateway auth system organization user permission \
    hr finance scm sales inventory purchase production project crm \
    workflow report file message notify scheduler monitor ai
do
    cd qooerp-$service/qooerp-$service-start
    mvn clean package
    nohup java -jar target/qooerp-$service-start-1.0.0.jar > /dev/null 2>&1 &
done
```

**适用场景：**
- 中大型企业（5000-1000000+用户）
- 生产环境
- 多团队协作

---

## 五、服务清单汇总

### 5.1 按优先级统计

| 优先级 | 服务数量 | 服务列表 |
|--------|---------|---------|
| **P0** | 6 | gateway, auth, system, organization, user, permission |
| **P1** | 6 | hr, finance, scm, sales, inventory, purchase |
| **P2** | 3 | production, project, crm |
| **P3** | 8 | workflow, report, file, message, notify, scheduler, monitor, ai |
| **聚合** | 1 | all |
| **合计** | **24** | - |

---

### 5.2 按类型统计

| 类型 | 服务数量 | 服务列表 |
|------|---------|---------|
| **核心基础** | 6 | auth, system, organization, user, permission, gateway |
| **核心业务** | 6 | hr, finance, scm, sales, inventory, purchase |
| **扩展业务** | 3 | production, project, crm |
| **高级功能** | 8 | workflow, report, file, message, notify, scheduler, monitor, ai |
| **聚合服务** | 1 | all |
| **合计** | **24** | - |

---

## 六、开发优先级建议

### 6.1 第一阶段（v1.0）- P0 核心基础

**目标**：完成核心基础服务，支持 All-In-One 模式

**服务列表：**
1. ✅ qooerp-auth（认证服务）
2. ✅ qooerp-system（系统管理）
3. ✅ qooerp-organization（组织管理）
4. ✅ qooerp-user（用户管理）
5. ✅ qooerp-permission（权限管理）
6. ✅ qooerp-all（All-In-One 聚合服务）

**预计时间**：2026-Q3

---

### 6.2 第二阶段（v2.0）- P1 核心业务

**目标**：完成核心业务服务

**服务列表：**
1. ✅ qooerp-hr（人力资源）
2. ✅ qooerp-finance（财务管理）
3. ✅ qooerp-scm（供应链管理）
4. ✅ qooerp-sales（销售管理）
5. ✅ qooerp-inventory（库存管理）
6. ✅ qooerp-purchase（采购管理）
7. ✅ qooerp-gateway（API 网关）

**预计时间**：2026-Q4

---

### 6.3 第三阶段（v3.0）- P2 扩展业务

**目标**：完成扩展业务服务

**服务列表：**
1. ✅ qooerp-production（生产管理）
2. ✅ qooerp-project（项目管理）
3. ✅ qooerp-crm（客户关系管理）

**预计时间**：2027-Q1

---

### 6.4 第四阶段（v4.0）- P3 高级功能

**目标**：完成高级功能服务

**服务列表：**
1. ✅ qooerp-workflow（工作流引擎）
2. ✅ qooerp-report（报表与分析）
3. ✅ qooerp-file（文件服务）
4. ✅ qooerp-message（消息服务）
5. ✅ qooerp-notify（通知服务）
6. ✅ qooerp-scheduler（任务调度）
7. ✅ qooerp-monitor（监控服务）
8. ✅ qooerp-ai（AI 智能服务）

**预计时间**：2027-Q2

---

## 七、附录

### 7.1 微服务命名规范

| 命名规则 | 示例 | 说明 |
|---------|------|------|
| 服务名 | qooerp-xxx | 统一前缀 qooerp- |
| service 模块 | qooerp-xxx-service | 业务逻辑模块 |
| start 模块 | qooerp-xxx-start | 启动模块 |
| 包路径 | com.qoobot.qooerp.xxx | 统一包路径 |

---

### 7.2 端口分配规则

| 服务类型 | 端口范围 | 说明 |
|---------|---------|------|
| 网关服务 | 8080 | API 网关 |
| 核心基础 | 8081-8085 | P0 核心基础服务 |
| 核心业务 | 8086-8091 | P1 核心业务服务 |
| 扩展业务 | 8092-8094 | P2 扩展业务服务 |
| 高级功能 | 8095-8102 | P3 高级功能服务 |
| 预留端口 | 8103-8199 | 预留服务端口 |

---

### 7.3 数据库命名规范

| 服务名 | 数据库 | 说明 |
|-------|--------|------|
| qooerp-auth | qooerp_auth | 认证数据库 |
| qooerp-system | qooerp_system | 系统管理数据库 |
| qooerp-organization | qooerp_organization | 组织管理数据库 |
| qooerp-user | qooerp_user | 用户管理数据库 |
| qooerp-permission | qooerp_permission | 权限管理数据库 |
| qooerp-hr | qooerp_hr | 人力资源数据库 |
| qooerp-finance | qooerp_finance | 财务管理数据库 |
| qooerp-scm | qooerp_scm | 供应链管理数据库 |
| qooerp-sales | qooerp_sales | 销售管理数据库 |
| qooerp-inventory | qooerp_inventory | 库存管理数据库 |
| qooerp-purchase | qooerp_purchase | 采购管理数据库 |
| qooerp-production | qooerp_production | 生产管理数据库 |
| qooerp-project | qooerp_project | 项目管理数据库 |
| qooerp-crm | qooerp_crm | 客户关系管理数据库 |
| qooerp-workflow | qooerp_workflow | 工作流引擎数据库 |
| qooerp-report | qooerp_report | 报表与分析数据库 |
| qooerp-file | qooerp_file | 文件服务数据库 |
| qooerp-message | qooerp_message | 消息服务数据库 |
| qooerp-notify | qooerp_notify | 通知服务数据库 |
| qooerp-scheduler | qooerp_scheduler | 任务调度数据库 |
| qooerp-monitor | qooerp_monitor | 监控服务数据库 |
| qooerp-ai | qooerp_ai | AI 智能服务数据库 |
| qooerp-all | qooerp_all | All-In-One 聚合数据库 |

---

### 7.4 相关文档

- [01-开源ERP千功能规划.md](./01-开源ERP千功能规划.md) - 功能规划文档
- [02-QooERP开发模块进度跟踪.md](./02-QooERP开发模块进度跟踪.md) - 模块进度跟踪
- [04-大型开源ERP系统开发准备工作清单.md](./04-大型开源ERP系统开发准备工作清单.md) - 准备工作清单
- [4-总体架构清单.md](04-总体架构清单.md) - 架构设计文档

---

## 八、变更记录

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|---------|--------|
| v1.0 | 20xx-xx-xx | 初始版本创建，完成 24 个微服务清单 | - |
| v1.1 | 20xx-xx-xx | 更新P0模块设计文档状态，所有P0核心模块设计文档已完成 | Auto |
| v1.2 | 20xx-xx-xx | 更新P1模块设计文档状态，所有P1核心业务模块设计文档已完成 | Auto |
| v1.3 | 20xx-xx-xx | 更新P2模块设计文档状态，所有P2扩展业务模块设计文档已完成 | Auto |

---

*文档维护：请保持此文档的及时更新，确保服务列表的准确性*

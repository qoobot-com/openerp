# QooERP 供应链管理 - 数据设计文档

> 版本：v1.0
> 创建日期：2026-02-17
> 数据库：qooerp_scm

---

## 一、核心表设计

### 1.1 scm_supplier（供应商表）

```sql
CREATE TABLE scm_supplier (
    id BIGINT NOT NULL AUTO_INCREMENT,
    tenant_id BIGINT NOT NULL DEFAULT 0,
    supplier_code VARCHAR(32) NOT NULL,
    supplier_name VARCHAR(128) NOT NULL,
    supplier_type VARCHAR(20) NOT NULL,
    industry VARCHAR(64),
    scale VARCHAR(20),
    contact_person VARCHAR(64),
    contact_phone VARCHAR(20),
    contact_email VARCHAR(128),
    address VARCHAR(256),
    tax_number VARCHAR(64),
    bank_name VARCHAR(64),
    bank_account VARCHAR(64),
    credit_level VARCHAR(10) DEFAULT 'C',
    credit_limit DECIMAL(18,2) DEFAULT 0.00,
    payment_method VARCHAR(20) DEFAULT 'MONTHLY',
    payment_days INT DEFAULT 30,
    status VARCHAR(20) DEFAULT 'ACTIVE',
    remark VARCHAR(512),
    created_by BIGINT DEFAULT NULL,
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT DEFAULT NULL,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted TINYINT NOT NULL DEFAULT 0,
    version INT NOT NULL DEFAULT 0,
    PRIMARY KEY (id),
    UNIQUE KEY uk_supplier_code (tenant_id, supplier_code),
    KEY idx_status (status),
    KEY idx_deleted (deleted),
    KEY idx_tenant_id (tenant_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='供应商表';
```

### 1.2 scm_customer（客户表）

```sql
CREATE TABLE scm_customer (
    id BIGINT NOT NULL AUTO_INCREMENT,
    tenant_id BIGINT NOT NULL DEFAULT 0,
    customer_code VARCHAR(32) NOT NULL,
    customer_name VARCHAR(128) NOT NULL,
    customer_type VARCHAR(20) NOT NULL,
    industry VARCHAR(64),
    scale VARCHAR(20),
    customer_level VARCHAR(20) DEFAULT 'NORMAL',
    contact_person VARCHAR(64),
    contact_phone VARCHAR(20),
    contact_email VARCHAR(128),
    address VARCHAR(256),
    tax_number VARCHAR(64),
    bank_name VARCHAR(64),
    bank_account VARCHAR(64),
    credit_limit DECIMAL(18,2) DEFAULT 0.00,
    payment_method VARCHAR(20) DEFAULT 'MONTHLY',
    payment_days INT DEFAULT 30,
    status VARCHAR(20) DEFAULT 'ACTIVE',
    remark VARCHAR(512),
    created_by BIGINT DEFAULT NULL,
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT DEFAULT NULL,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted TINYINT NOT NULL DEFAULT 0,
    version INT NOT NULL DEFAULT 0,
    PRIMARY KEY (id),
    UNIQUE KEY uk_customer_code (tenant_id, customer_code),
    KEY idx_status (status),
    KEY idx_deleted (deleted),
    KEY idx_tenant_id (tenant_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='客户表';
```

### 1.3 scm_logistics（物流表）

```sql
CREATE TABLE scm_logistics (
    id BIGINT NOT NULL AUTO_INCREMENT,
    tenant_id BIGINT NOT NULL DEFAULT 0,
    logistics_code VARCHAR(32) NOT NULL,
    business_type VARCHAR(20) NOT NULL,
    related_order_id BIGINT DEFAULT NULL,
    related_order_code VARCHAR(64),
    logistics_company VARCHAR(128),
    tracking_number VARCHAR(64),
    sender VARCHAR(64),
    sender_phone VARCHAR(20),
    sender_address VARCHAR(256),
    receiver VARCHAR(64),
    receiver_phone VARCHAR(20),
    receiver_address VARCHAR(256),
    shipment_date DATE,
    estimated_arrival_date DATE,
    actual_arrival_date DATE,
    logistics_cost DECIMAL(18,2) DEFAULT 0.00,
    logistics_status VARCHAR(20) DEFAULT 'PENDING',
    remark VARCHAR(512),
    created_by BIGINT DEFAULT NULL,
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT DEFAULT NULL,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted TINYINT NOT NULL DEFAULT 0,
    version INT NOT NULL DEFAULT 0,
    PRIMARY KEY (id),
    UNIQUE KEY uk_logistics_code (tenant_id, logistics_code),
    KEY idx_related_order (related_order_id),
    KEY idx_status (logistics_status),
    KEY idx_deleted (deleted),
    KEY idx_tenant_id (tenant_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='物流表';
```

### 1.4 scm_logistics_tracking（物流跟踪表）

```sql
CREATE TABLE scm_logistics_tracking (
    id BIGINT NOT NULL AUTO_INCREMENT,
    tenant_id BIGINT NOT NULL DEFAULT 0,
    logistics_id BIGINT NOT NULL,
    tracking_time DATETIME NOT NULL,
    location VARCHAR(256),
    status VARCHAR(20) NOT NULL,
    description VARCHAR(512),
    operator VARCHAR(64),
    created_by BIGINT DEFAULT NULL,
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (id),
    KEY idx_logistics_id (logistics_id),
    KEY idx_deleted (deleted),
    KEY idx_tenant_id (tenant_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='物流跟踪表';
```

---

*文档维护：请保持此文档的及时更新*

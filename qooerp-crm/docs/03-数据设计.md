# QooERP 客户关系管理模块 - 数据设计文档

> 模块名称: qooerp-crm  
> 模块版本: v1.0  
> 创建日期: 2026-02-17  
> 作者: Auto  

---

## 一、数据库设计

| 表名 | 中文名称 | 说明 |
|------|---------|------|
| crm_customer | 客户表 | 客户主表 |
| crm_opportunity | 商机表 | 商机主表 |
| crm_contract | 合同表 | 合同主表 |
| crm_service | 服务表 | 服务工单主表 |
| crm_followup | 跟进记录表 | 跟进记录表 |

---

## 二、表结构

### 2.1 crm_customer（客户表）

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | BIGINT | 主键 |
| customer_no | VARCHAR | 客户编号 |
| customer_name | VARCHAR | 客户名称 |
| customer_type | TINYINT | 客户类型(1-企业,2-个人) |
| level | TINYINT | 客户等级(1-A级,2-B级,3-C级) |
| industry | VARCHAR | 所属行业 |
| region | VARCHAR | 所在地区 |
| contact_person | VARCHAR | 联系人 |
| contact_phone | VARCHAR | 联系电话 |
| contact_email | VARCHAR | 联系邮箱 |
| address | VARCHAR | 地址 |
| status | TINYINT | 状态(0-待审核,1-已审核,2-已停用) |

### 2.2 crm_opportunity（商机表）

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | BIGINT | 主键 |
| opportunity_no | VARCHAR | 商机编号 |
| customer_id | BIGINT | 客户ID |
| customer_name | VARCHAR | 客户名称 |
| opportunity_name | VARCHAR | 商机名称 |
| stage | TINYINT | 商机阶段(1-初步接触,2-需求确认,3-方案报价,4-商务谈判,5-合同签订) |
| amount | DECIMAL | 预计金额 |
| probability | INT | 成功概率(%) |
| expected_close_date | DATE | 预计成交日期 |
| owner_id | BIGINT | 负责人ID |
| owner_name | VARCHAR | 负责人姓名 |
| status | TINYINT | 状态(0-进行中,1-已转化,2-已关闭) |

### 2.3 crm_contract（合同表）

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | BIGINT | 主键 |
| contract_no | VARCHAR | 合同编号 |
| opportunity_id | BIGINT | 商机ID |
| customer_id | BIGINT | 客户ID |
| customer_name | VARCHAR | 客户名称 |
| contract_name | VARCHAR | 合同名称 |
| contract_amount | DECIMAL | 合同金额 |
| start_date | DATE | 开始日期 |
| end_date | DATE | 结束日期 |
| status | TINYINT | 状态(0-草稿,1-已审核,2-执行中,3-已完成) |

### 2.4 crm_service（服务表）

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | BIGINT | 主键 |
| service_no | VARCHAR | 服务编号 |
| customer_id | BIGINT | 客户ID |
| customer_name | VARCHAR | 客户名称 |
| service_type | VARCHAR | 服务类型 |
| service_title | VARCHAR | 服务标题 |
| description | TEXT | 服务描述 |
| priority | TINYINT | 优先级(1-低,2-中,3-高) |
| status | TINYINT | 状态(0-待处理,1-处理中,2-已完成) |
| assignee_id | BIGINT | 处理人ID |
| assignee_name | VARCHAR | 处理人姓名 |

### 2.5 crm_followup（跟进记录表）

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | BIGINT | 主键 |
| followup_no | VARCHAR | 跟进编号 |
| customer_id | BIGINT | 客户ID |
| opportunity_id | BIGINT | 商机ID(可选) |
| followup_type | VARCHAR | 跟进类型 |
| followup_content | TEXT | 跟进内容 |
| followup_date | DATE | 跟进日期 |
| followup_person_id | BIGINT | 跟进人ID |
| followup_person_name | VARCHAR | 跟进人姓名 |

---

## 三、数据字典

### 3.1 商机阶段

| 值 | 说明 |
|----|------|
| 1 | 初步接触 |
| 2 | 需求确认 |
| 3 | 方案报价 |
| 4 | 商务谈判 |
| 5 | 合同签订 |

### 3.2 合同状态

| 值 | 说明 |
|----|------|
| 0 | 草稿 |
| 1 | 已审核 |
| 2 | 执行中 |
| 3 | 已完成 |

---

**文档版本**: v1.0  
**最后更新**: 2026-02-17

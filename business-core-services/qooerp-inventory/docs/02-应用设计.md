# QooERP 库存管理 - 应用设计文档

> 版本：v1.1
> 创建日期：2026-02-17

---

## 一、核心接口

### 1.1 物料管理接口

```java
@RestController
@RequestMapping("/api/inventory/materials")
public class InventoryMaterialController {

    @PostMapping
    public Result<Long> createMaterial(@RequestBody @Valid MaterialCreateDTO dto);

    @PutMapping("/{id}")
    public Result<Void> updateMaterial(@PathVariable Long id,
                                        @RequestBody @Valid MaterialUpdateDTO dto);

    @GetMapping("/{id}")
    public Result<MaterialDTO> getMaterial(@PathVariable Long id);

    @GetMapping("/list")
    public Result<PageResult<MaterialDTO>> listMaterials(@Valid MaterialQueryDTO dto);

    @DeleteMapping("/{id}")
    public Result<Void> deleteMaterial(@PathVariable Long id);

    @GetMapping("/categories")
    public Result<List<TreeNodeVO>> getCategories();
}
```

### 1.2 仓库管理接口

```java
@RestController
@RequestMapping("/api/inventory/warehouses")
public class InventoryWarehouseController {

    @PostMapping
    public Result<Long> createWarehouse(@RequestBody @Valid WarehouseCreateDTO dto);

    @PutMapping("/{id}")
    public Result<Void> updateWarehouse(@PathVariable Long id,
                                        @RequestBody @Valid WarehouseUpdateDTO dto);

    @GetMapping("/{id}")
    public Result<WarehouseDTO> getWarehouse(@PathVariable Long id);

    @GetMapping("/list")
    public Result<PageResult<WarehouseDTO>> listWarehouses(@Valid WarehouseQueryDTO dto);

    @DeleteMapping("/{id}")
    public Result<Void> deleteWarehouse(@PathVariable Long id);
}
```

### 1.3 库存管理接口

```java
@RestController
@RequestMapping("/api/inventory/stocks")
public class InventoryStockController {

    @GetMapping
    public Result<PageResult<StockDTO>> listStocks(@Valid StockQueryDTO dto);

    @GetMapping("/{warehouseId}/materials/{materialId}")
    public Result<StockDTO> getStock(@PathVariable Long warehouseId,
                                      @PathVariable Long materialId);

    @PostMapping("/{id}/adjust")
    public Result<Void> adjustStock(@PathVariable Long id,
                                     @RequestBody StockAdjustDTO dto);

    @GetMapping("/alerts")
    public Result<List<StockAlertDTO>> getStockAlerts();
}
```

### 1.4 入库管理接口

```java
@RestController
@RequestMapping("/api/inventory/inbounds")
public class InventoryInboundController {

    @PostMapping
    public Result<Long> createInbound(@RequestBody @Valid InboundCreateDTO dto);

    @PutMapping("/{id}/approve")
    public Result<Void> approveInbound(@PathVariable Long id,
                                        @RequestBody ApproveDTO dto);

    @PutMapping("/{id}/execute")
    public Result<Void> executeInbound(@PathVariable Long id);

    @GetMapping("/{id}")
    public Result<InboundDTO> getInbound(@PathVariable Long id);

    @GetMapping("/list")
    public Result<PageResult<InboundDTO>> listInbounds(@Valid InboundQueryDTO dto);

    @DeleteMapping("/{id}")
    public Result<Void> deleteInbound(@PathVariable Long id);
}
```

### 1.5 出库管理接口

```java
@RestController
@RequestMapping("/api/inventory/outbounds")
public class InventoryOutboundController {

    @PostMapping
    public Result<Long> createOutbound(@RequestBody @Valid OutboundCreateDTO dto);

    @PutMapping("/{id}/approve")
    public Result<Void> approveOutbound(@PathVariable Long id,
                                         @RequestBody ApproveDTO dto);

    @PutMapping("/{id}/execute")
    public Result<Void> executeOutbound(@PathVariable Long id);

    @GetMapping("/{id}")
    public Result<OutboundDTO> getOutbound(@PathVariable Long id);

    @GetMapping("/list")
    public Result<PageResult<OutboundDTO>> listOutbounds(@Valid OutboundQueryDTO dto);

    @DeleteMapping("/{id}")
    public Result<Void> deleteOutbound(@PathVariable Long id);
}
```

### 1.6 调拨管理接口

```java
@RestController
@RequestMapping("/api/inventory/transfers")
public class InventoryTransferController {

    @PostMapping
    public Result<Long> createTransfer(@RequestBody @Valid TransferCreateDTO dto);

    @PutMapping("/{id}/approve")
    public Result<Void> approveTransfer(@PathVariable Long id,
                                         @RequestBody ApproveDTO dto);

    @PutMapping("/{id}/execute")
    public Result<Void> executeTransfer(@PathVariable Long id);

    @GetMapping("/{id}")
    public Result<TransferDTO> getTransfer(@PathVariable Long id);

    @GetMapping("/list")
    public Result<PageResult<TransferDTO>> listTransfers(@Valid TransferQueryDTO dto);

    @DeleteMapping("/{id}")
    public Result<Void> deleteTransfer(@PathVariable Long id);
}
```

### 1.7 盘点管理接口

```java
@RestController
@RequestMapping("/api/inventory/checks")
public class InventoryCheckController {

    @PostMapping
    public Result<Long> createCheck(@RequestBody @Valid CheckCreateDTO dto);

    @PutMapping("/{id}/execute")
    public Result<Void> executeCheck(@PathVariable Long id);

    @GetMapping("/{id}")
    public Result<CheckDTO> getCheck(@PathVariable Long id);

    @GetMapping("/list")
    public Result<PageResult<CheckDTO>> listChecks(@Valid CheckQueryDTO dto);

    @DeleteMapping("/{id}")
    public Result<Void> deleteCheck(@PathVariable Long id);
}
```

### 1.8 库存记录接口

```java
@RestController
@RequestMapping("/api/inventory/records")
public class InventoryRecordController {

    @GetMapping
    public Result<PageResult<StockRecordDTO>> listRecords(@Valid StockRecordQueryDTO dto);
}
```

---

**文档版本**: v1.1

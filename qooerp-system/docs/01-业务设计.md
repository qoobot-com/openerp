# qooerp-system 系统管理 - 业务设计文档

> 模块版本：1.0.0-SNAPSHOT
> 创建日期：2026-02-17
> 文档作者：QooERP团队

---

## 一、业务概述

### 1.1 模块定位

qooerp-system是QooERP系统的系统管理核心服务，负责：
- 字典管理（数据字典、字典项）
- 参数配置（系统参数、配置管理）
- 日志管理（操作日志、登录日志）
- 文件管理（文件上传、下载）
- 定时任务（任务调度、执行管理）
- 消息通知（站内消息、系统公告）

### 1.2 业务目标

| 目标 | 描述 |
|------|------|
| 灵活性 | 支持动态配置，无需重启系统 |
| 可追溯 | 完整的日志记录，便于审计 |
| 高可用 | 任务调度高可用，防止失败 |
| 易维护 | 统一的系统管理入口 |

---

## 二、核心业务功能

### 2.1 字典管理

| 功能点 | 描述 | 优先级 | 状态 |
|--------|------|--------|------|
| 字典创建 | 创建数据字典 | P0 | 未开始 |
| 字典编辑 | 编辑字典信息 | P0 | 未开始 |
| 字典删除 | 删除字典 | P0 | 未开始 |
| 字典项管理 | 管理字典明细项 | P0 | 未开始 |
| 字典查询 | 查询字典及项 | P0 | 未开始 |
| 字典缓存 | 字典数据缓存 | P0 | 未开始 |

### 2.2 参数配置

| 功能点 | 描述 | 优先级 | 状态 |
|--------|------|--------|------|
| 参数创建 | 创建系统参数 | P0 | 未开始 |
| 参数编辑 | 编辑系统参数 | P0 | 未开始 |
| 参数删除 | 删除系统参数 | P0 | 未开始 |
| 参数查询 | 查询系统参数 | P0 | 未开始 |
| 参数刷新 | 刷新参数缓存 | P0 | 未开始 |

### 2.3 日志管理

| 功能点 | 描述 | 优先级 | 状态 |
|--------|------|--------|------|
| 操作日志记录 | 记录用户操作 | P0 | 未开始 |
| 日志查询 | 查询操作日志 | P0 | 未开始 |
| 日志导出 | 导出操作日志 | P1 | 未开始 |
| 日志清理 | 定期清理过期日志 | P0 | 未开始 |

### 2.4 定时任务

| 功能点 | 描述 | 优先级 | 状态 |
|--------|------|--------|------|
| 任务创建 | 创建定时任务 | P1 | 未开始 |
| 任务编辑 | 编辑定时任务 | P1 | 未开始 |
| 任务删除 | 删除定时任务 | P1 | 未开始 |
| 任务启动/暂停 | 控制任务执行 | P1 | 未开始 |
| 任务执行记录 | 记录任务执行日志 | P1 | 未开始 |

---

## 三、业务规则

### 3.1 字典规则

| 规则 | 说明 |
|------|------|
| 字典编码唯一 | 字典编码全局唯一 |
| 字典项编码唯一 | 同一字典下字典项编码唯一 |
| 字典缓存有效期 | 30分钟 |
| 字典删除校验 | 字典下有字典项时不可删除 |

### 3.2 参数配置规则

| 规则 | 说明 |
|------|------|
| 参数键唯一 | 参数键全局唯一 |
| 参数缓存 | 所有参数加载到内存 |
| 系统参数保护 | 系统参数不可删除 |

### 3.3 日志规则

| 规则 | 说明 |
|------|------|
| 日志保留周期 | 操作日志保留90天 |
| 敏感信息脱敏 | 日志中的敏感信息需要脱敏 |
| 日志级别 | INFO、WARN、ERROR |

---

## 四、异常处理

### 4.1 字典异常

| 错误码 | 错误信息 | 处理方式 |
|--------|---------|---------|
| SYS_001 | 字典编码已存在 | 提示修改编码 |
| SYS_002 | 字典项编码已存在 | 提示修改编码 |

### 4.2 参数异常

| 错误码 | 错误信息 | 处理方式 |
|--------|---------|---------|
| SYS_101 | 参数键已存在 | 提示修改键名 |
| SYS_102 | 系统参数不可删除 | 提示权限不足 |

---

## 五、业务指标

| 指标 | 目标值 |
|------|--------|
| 字典查询响应时间 | <10ms |
| 参数刷新响应时间 | <50ms |
| 日志写入性能 | >10000 TPS |
| 任务调度准确性 | >99.9% |

---

## 六、参考资料

- [Quartz调度框架](https://www.quartz-scheduler.org/)
- [Logback日志框架](https://logback.qos.ch/)

# QooERP 采购管理 - 应用设计文档

> 版本：v1.0
> 创建日期：2026-02-17

---

## 一、核心实体设计

### 1.1 PurchaseOrder（采购订单实体）

```java
package com.qoobot.qooerp.purchase.order.domain;

import com.qoobot.qooerp.common.core.entity.BaseEntity;
import lombok.Data;
import lombok.EqualsAndHashCode;
import java.math.BigDecimal;
import java.time.LocalDate;

/**
 * 采购订单实体
 */
@Data
@EqualsAndHashCode(callSuper = true)
public class PurchaseOrder extends BaseEntity {
    
    /** 订单编号 */
    private String orderCode;
    
    /** 供应商ID */
    private Long supplierId;
    
    /** 供应商名称 */
    private String supplierName;
    
    /** 订单日期 */
    private LocalDate orderDate;
    
    /** 交货日期 */
    private LocalDate deliveryDate;
    
    /** 订单金额 */
    private BigDecimal orderAmount;
    
    /** 折扣金额 */
    private BigDecimal discountAmount;
    
    /** 实付金额 */
    private BigDecimal payableAmount;
    
    /** 订单状态 */
    private String orderStatus; // DRAFT, PENDING, APPROVED, RECEIVED, COMPLETED, CANCELLED
    
    /** 采购员ID */
    private Long purchaserId;
    
    /** 采购员姓名 */
    private String purchaserName;
    
    /** 仓库ID */
    private Long warehouseId;
    
    /** 仓库名称 */
    private String warehouseName;
    
    /** 备注 */
    private String remark;
}
```

### 1.2 PurchaseOrderDetail（订单明细实体）

```java
package com.qoobot.qooerp.purchase.order.domain;

import com.qoobot.qooerp.common.core.entity.BaseEntity;
import lombok.Data;
import lombok.EqualsAndHashCode;
import java.math.BigDecimal;

/**
 * 采购订单明细实体
 */
@Data
@EqualsAndHashCode(callSuper = true)
public class PurchaseOrderDetail extends BaseEntity {
    
    /** 订单ID */
    private Long orderId;
    
    /** 物料ID */
    private Long materialId;
    
    /** 物料编码 */
    private String materialCode;
    
    /** 物料名称 */
    private String materialName;
    
    /** 规格型号 */
    private String specification;
    
    /** 计量单位 */
    private String unit;
    
    /** 数量 */
    private BigDecimal quantity;
    
    /** 单价 */
    private BigDecimal unitPrice;
    
    /** 金额 */
    private BigDecimal amount;
    
    /** 折扣率 */
    private BigDecimal discountRate;
    
    /** 折扣金额 */
    private BigDecimal discountAmount;
    
    /** 实付金额 */
    private BigDecimal payableAmount;
    
    /** 已收货数量 */
    private BigDecimal receivedQuantity;
    
    /** 备注 */
    private String remark;
}
```

---

## 二、核心服务接口

```java
public interface PurchaseOrderService {
    Result<Long> createOrder(OrderDTO orderDTO);
    Result<Void> approveOrder(Long orderId, Long approverId);
    Result<Void> receiveOrder(Long orderId);
    Result<OrderDTO> getOrder(Long orderId);
    Result<PageResult<OrderDTO>> queryOrders(OrderQueryDTO queryDTO);
    Result<Long> createReceipt(ReceiptDTO receiptDTO);
    Result<Long> createReturn(ReturnDTO returnDTO);
}
```

---

*文档维护：请保持此文档的及时更新*

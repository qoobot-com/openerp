# QooERP 消息服务模块 - 业务设计文档

> 模块名称: qooerp-message
> 模块版本: v1.0
> 创建日期: 2026-02-17

## 一、业务概述

消息服务模块提供统一的消息管理能力，支持多渠道消息发送、接收、管理等功能。

## 二、核心功能

### 2.1 消息发送
- 系统消息发送（单发、群发）
- 业务消息发送（工作流提醒、单据审批等）
- 通知消息发送（系统公告、升级通知等）
- 消息模板发送（使用预定义模板）

### 2.2 消息接收
- 消息列表查询（分页、筛选）
- 未读消息查询
- 消息详情查看

### 2.3 消息管理
- 消息标记已读
- 批量标记已读
- 消息删除
- 批量删除

### 2.4 消息模板
- 模板创建、编辑、删除
- 模板变量定义
- 模板预览

### 2.5 消息通知渠道
- 站内信通知
- 短信通知
- 邮件通知
- WebSocket 实时推送

### 2.6 消息统计
- 发送统计（按时间、类型）
- 阅读率统计
- 未读统计

### 2.7 消息归档
- 历史消息自动归档
- 归档消息查询

## 三、领域模型

| 实体 | 说明 |
|------|------|
| Message | 消息 |
| MessageReceiver | 消息接收者 |
| MessageTemplate | 消息模板 |
| MessageChannel | 消息渠道 |
| MessageStatistics | 消息统计 |

## 四、业务规则

1. 消息按租户隔离
2. 消息支持多种类型（系统、业务、通知）
3. 消息支持优先级（普通、重要、紧急）
4. 消息支持多渠道发送
5. 消息模板支持变量替换
6. 消息删除为逻辑删除

---

**文档版本**: v1.0

# QooERP 通知服务模块 - 业务设计文档

> 模块名称: qooerp-notify
> 模块版本: v1.0
> 创建日期: 2026-02-17

## 一、业务概述

通知服务模块提供统一的通知能力,支持邮件、短信、站内通知、推送通知等多种通知方式。

## 二、核心功能

### 2.1 通知发送
- 邮件通知（邮件发送、邮件模板）
- 短信通知（短信发送、短信模板）
- 站内通知（站内消息、系统公告）
- 推送通知（APP推送、浏览器推送）
- Webhook通知（第三方系统回调）

### 2.2 模板管理
- 模板创建、编辑、删除
- 模板分类管理
- 模板变量定义
- 模板预览

### 2.3 通知记录
- 发送记录查询
- 发送状态跟踪
- 失败重试机制
- 发送统计分析

### 2.4 接收者管理
- 用户订阅管理
- 接收渠道配置
- 免打扰设置
- 黑名单管理

### 2.5 系统配置
- 通知渠道开关
- 发送限流配置
- 重试策略配置
- 钩子配置

## 三、领域模型

| 实体 | 说明 |
|------|------|
| NotifyRecord | 通知记录 |
| NotifyTemplate | 通知模板 |
| NotifySubscription | 用户订阅 |
| NotifyConfig | 通知配置 |
| NotifyChannel | 通知渠道 |

## 四、业务流程

### 4.1 发送流程
1. 接收发送请求
2. 校验请求参数
3. 选择通知渠道
4. 应用模板（如使用模板）
5. 执行发送
6. 记录发送结果
7. 失败重试（如需要）

### 4.2 模板使用流程
1. 查询模板
2. 填充模板变量
3. 生成最终内容
4. 发送通知

---

**文档版本**: v1.0

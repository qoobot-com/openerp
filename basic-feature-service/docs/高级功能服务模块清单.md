### 2.4 P3 级：高级功能服务（增强能力）

#### 2.4.1 qooerp-workflow（工作流引擎）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-workflow |
| **服务描述** | 工作流引擎 |
| **功能模块** | 流程定义、流程实例、流程审批、流程监控 |
| **依赖服务** | qooerp-user（审批人）、qooerp-notify（通知） |
| **端口** | 8095 |
| **数据库** | qooerp_workflow |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-A（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 流程定义（BPMN 设计、流程发布）
- 流程实例（流程启动、流程执行、流程完成）
- 流程审批（审批任务、审批通过、审批驳回）
- 流程监控（流程查询、流程统计）

**API 接口：**
```
GET /api/workflow/definitions     # 流程定义列表
POST /api/workflow/definitions    # 发布流程
POST /api/workflow/instances      # 启动流程
GET /api/workflow/tasks           # 待办任务列表
POST /api/workflow/tasks/{id}/approve   # 审批通过
POST /api/workflow/tasks/{id}/reject    # 审批驳回
```

---

#### 2.4.2 qooerp-report（报表与分析）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-report |
| **服务描述** | 报表与分析 |
| **功能模块** | 报表管理、数据统计、数据分析、数据可视化 |
| **依赖服务** | 所有业务服务（数据源） |
| **端口** | 8096 |
| **数据库** | qooerp_report |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-A（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 报表管理（报表设计、报表发布、报表订阅）
- 数据统计（业务统计、数据汇总）
- 数据分析（趋势分析、对比分析）
- 数据可视化（图表展示、仪表盘）

**API 接口：**
```
GET /api/report/reports           # 报表列表
POST /api/report/reports          # 创建报表
GET /api/report/reports/{id}/data # 报表数据
GET /api/report/dashboards        # 仪表盘列表
GET /api/statistics/business      # 业务统计
```

---

#### 2.4.3 qooerp-file（文件服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-file |
| **服务描述** | 文件服务 |
| **功能模块** | 文件上传、文件下载、文件预览、文件管理 |
| **依赖服务** | MinIO（对象存储） |
| **端口** | 8097 |
| **数据库** | qooerp_file |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-B（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 文件上传（单文件上传、多文件上传）
- 文件下载（文件下载、批量下载）
- 文件预览（图片预览、文档预览）
- 文件管理（文件删除、文件分享）

**API 接口：**
```
POST /api/file/upload             # 文件上传
GET /api/file/download/{id}       # 文件下载
GET /api/file/preview/{id}        # 文件预览
DELETE /api/file/{id}             # 删除文件
GET /api/file/share/{id}          # 文件分享
```

---

#### 2.4.4 qooerp-message（消息服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-message |
| **服务描述** | 消息服务 |
| **功能模块** | 消息发送、消息接收、消息管理 |
| **依赖服务** | RocketMQ（消息队列） |
| **端口** | 8098 |
| **数据库** | qooerp_message |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-B（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 消息发送（系统消息、业务消息、通知消息）
- 消息接收（消息列表、未读消息）
- 消息管理（消息已读、消息删除）

**API 接口：**
```
POST /api/message/send            # 发送消息
GET /api/message/list             # 消息列表
GET /api/message/unread           # 未读消息
POST /api/message/read/{id}       # 标记已读
DELETE /api/message/{id}          # 删除消息
```

---

#### 2.4.5 qooerp-notify（通知服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-notify |
| **服务描述** | 通知服务 |
| **功能模块** | 邮件通知、短信通知、站内通知、推送通知 |
| **依赖服务** | qooerp-message（消息） |
| **端口** | 8099 |
| **数据库** | qooerp_notify |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-B（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 邮件通知（邮件发送、邮件模板）
- 短信通知（短信发送、短信模板）
- 站内通知（站内消息、系统公告）
- 推送通知（APP 推送、浏览器推送）

**API 接口：**
```
POST /api/notify/email             # 发送邮件
POST /api/notify/sms              # 发送短信
POST /api/notify/inbox            # 发送站内通知
POST /api/notify/push             # 发送推送通知
```

---

#### 2.4.6 qooerp-scheduler（任务调度）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-scheduler |
| **服务描述** | 任务调度 |
| **功能模块** | 定时任务、任务监控、任务日志 |
| **依赖服务** | XXL-JOB 或 Spring Task |
| **端口** | 8100 |
| **数据库** | qooerp_scheduler |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-C（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 定时任务（任务创建、任务执行、任务调度）
- 任务监控（任务状态、任务日志）
- 任务管理（任务启动、任务停止、任务删除）

**API 接口：**
```
GET /api/scheduler/jobs           # 任务列表
POST /api/scheduler/jobs          # 创建任务
POST /api/scheduler/jobs/{id}/start    # 启动任务
POST /api/scheduler/jobs/{id}/stop     # 停止任务
GET /api/scheduler/jobs/{id}/logs      # 任务日志
```

---

#### 2.4.7 qooerp-monitor（监控服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-monitor |
| **服务描述** | 监控服务 |
| **功能模块** | 服务监控、性能监控、链路追踪、告警管理 |
| **依赖服务** | Prometheus、Grafana、OpenTelemetry |
| **端口** | 8101 |
| **数据库** | qooerp_monitor |
| **部署模式** | 微服务模式专用（All-In-One 模式不需要） |
| **优先级** | P3-C（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 服务监控（服务状态、服务健康）
- 性能监控（CPU、内存、磁盘、网络）
- 链路追踪（调用链、性能分析）
- 告警管理（告警规则、告警通知）

**API 接口：**
```
GET /api/monitor/services         # 服务列表
GET /api/monitor/metrics          # 监控指标
GET /api/monitor/trace/{id}       # 链路追踪
GET /api/monitor/alerts           # 告警列表
```

---

#### 2.4.8 qooerp-ai（AI 智能服务）

| 属性 | 说明 |
|------|------|
| **服务名称** | qooerp-ai |
| **服务描述** | AI 智能服务 |
| **功能模块** | 智能推荐、智能预测、智能客服、智能报表 |
| **依赖服务** | Spring AI、LangChain4J、pgvector |
| **端口** | 8102 |
| **数据库** | qooerp_ai |
| **部署模式** | All-In-One + 微服务 |
| **优先级** | P3-D（高级功能） |
| **状态** | ⬜ 未开始 |

**核心功能：**
- 智能推荐（商品推荐、流程推荐）
- 智能预测（销售预测、库存预测）
- 智能客服（问答系统、智能客服）
- 智能报表（报表生成、数据分析）

**API 接口：**
```
POST /api/ai/recommend            # 智能推荐
POST /api/ai/predict              # 智能预测
POST /api/ai/chat                 # 智能问答
POST /api/ai/report/generate      # 智能报表
```

---
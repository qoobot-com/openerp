# QooERP 消息服务模块 - 数据设计文档

## 数据库表

### message（消息表）

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | BIGINT | 主键 |
| message_no | VARCHAR(50) | 消息编号 |
| title | VARCHAR(200) | 标题 |
| content | TEXT | 内容 |
| type | TINYINT(4) | 类型（1:系统 2:业务 3:通知） |
| priority | TINYINT(4) | 优先级（1:普通 2:重要 3:紧急） |
| status | TINYINT(4) | 状态（1:草稿 2:已发送） |
| sender_id | BIGINT(20) | 发送者ID |
| sender_name | VARCHAR(50) | 发送者名称 |
| channels | VARCHAR(100) | 发送渠道（站内信/短信/邮件） |
| template_id | BIGINT(20) | 模板ID |
| send_time | DATETIME | 发送时间 |
| tenant_id | BIGINT(20) | 租户ID |
| create_time | DATETIME | 创建时间 |
| deleted | TINYINT(1) | 删除标记 |

### message_receiver（消息接收者表）

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | BIGINT(20) | 主键 |
| message_id | BIGINT(20) | 消息ID |
| receiver_id | BIGINT(20) | 接收者ID |
| receiver_name | VARCHAR(50) | 接收者名称 |
| read_status | TINYINT(4) | 阅读状态（0:未读 1:已读） |
| read_time | DATETIME | 阅读时间 |
| tenant_id | BIGINT(20) | 租户ID |
| create_time | DATETIME | 创建时间 |

### message_template（消息模板表）

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | BIGINT(20) | 主键 |
| template_no | VARCHAR(50) | 模板编号 |
| template_name | VARCHAR(100) | 模板名称 |
| template_type | TINYINT(4) | 模板类型（1:系统 2:业务 3:通知） |
| title_template | VARCHAR(200) | 标题模板 |
| content_template | TEXT | 内容模板 |
| variables | VARCHAR(500) | 模板变量（JSON） |
| status | TINYINT(4) | 状态（0:禁用 1:启用） |
| tenant_id | BIGINT(20) | 租户ID |
| create_by | BIGINT(20) | 创建人 |
| create_time | DATETIME | 创建时间 |
| update_by | BIGINT(20) | 更新人 |
| update_time | DATETIME | 更新时间 |
| deleted | TINYINT(1) | 删除标记 |

### message_channel（消息渠道表）

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | BIGINT(20) | 主键 |
| channel_code | VARCHAR(20) | 渠道编码 |
| channel_name | VARCHAR(50) | 渠道名称 |
| channel_type | VARCHAR(20) | 渠道类型（站内信/短信/邮件） |
| config | TEXT | 渠道配置（JSON） |
| status | TINYINT(4) | 状态（0:禁用 1:启用） |
| tenant_id | BIGINT(20) | 租户ID |
| create_time | DATETIME | 创建时间 |
| update_time | DATETIME | 更新时间 |
| deleted | TINYINT(1) | 删除标记 |

### message_statistics（消息统计表）

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | BIGINT(20) | 主键 |
| stat_date | DATE | 统计日期 |
| stat_type | VARCHAR(20) | 统计类型（发送/阅读/未读） |
| message_type | TINYINT(4) | 消息类型 |
| channel_code | VARCHAR(20) | 渠道编码 |
| total_count | BIGINT(20) | 总数 |
| tenant_id | BIGINT(20) | 租户ID |
| create_time | DATETIME | 创建时间 |

---

**文档版本**: v1.0

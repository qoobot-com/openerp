<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qoobot.qooerp.system.mapper.SystemDictItemMapper">

    <!-- 分页查询字典项 -->
    <select id="selectPageByQuery" resultType="com.qoobot.qooerp.system.entity.SystemDictItem">
        SELECT id, dict_id, item_label, item_value, item_code, sort, status, remark,
               create_time, create_by, update_time, update_by
        FROM system_dict_item
        <where>
            <if test="query.dictId != null">
                AND dict_id = #{query.dictId}
            </if>
            <if test="query.itemLabel != null and query.itemLabel != ''">
                AND item_label LIKE CONCAT('%', #{query.itemLabel}, '%')
            </if>
            <if test="query.itemCode != null and query.itemCode != ''">
                AND item_code = #{query.itemCode}
            </if>
            <if test="query.status != null">
                AND status = #{query.status}
            </if>
        </where>
        ORDER BY sort ASC, create_time DESC
    </select>

    <!-- 根据字典ID查询字典项列表 -->
    <select id="selectByDictId" resultType="com.qoobot.qooerp.system.entity.SystemDictItem">
        SELECT id, dict_id, item_label, item_value, item_code, sort, status, remark
        FROM system_dict_item
        WHERE dict_id = #{dictId} AND status = 1
        ORDER BY sort ASC, id ASC
    </select>

    <!-- 根据字典编码查询字典项列表 -->
    <select id="selectByDictCode" resultType="com.qoobot.qooerp.system.entity.SystemDictItem">
        SELECT item.id, item.dict_id, item.item_label, item.item_value, item.item_code,
               item.sort, item.status, item.remark
        FROM system_dict_item item
        INNER JOIN system_dict dict ON item.dict_id = dict.id
        WHERE dict.dict_code = #{dictCode} AND item.status = 1
        ORDER BY item.sort ASC, item.id ASC
    </select>

</mapper>

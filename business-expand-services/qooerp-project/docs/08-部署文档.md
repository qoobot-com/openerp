# QooERP é¡¹ç›®ç®¡ç†æ¨¡å— - éƒ¨ç½²æ–‡æ¡£

> ç‰ˆæœ¬ï¼šv1.0
> åˆ›å»ºæ—¥æœŸï¼š20xx-xx-xx
> æœ€åæ›´æ–°ï¼š20xx-xx-xx
> æ¨¡å—çŠ¶æ€ï¼šğŸš§ è§„åˆ’ä¸­

---

## ä¸€ã€éƒ¨ç½²æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº† qooerp-project é¡¹ç›®ç®¡ç†æ¨¡å—çš„éƒ¨ç½²æµç¨‹ã€ç¯å¢ƒé…ç½®ã€ç›‘æ§å‘Šè­¦ç­‰å†…å®¹ã€‚

---

## äºŒã€ç¯å¢ƒè¦æ±‚

### 2.1 ç¡¬ä»¶è¦æ±‚

| ç¯å¢ƒ | CPU | å†…å­˜ | ç£ç›˜ | ç½‘ç»œ |
|------|-----|------|------|------|
| å¼€å‘ç¯å¢ƒ | 4æ ¸ | 8GB | 50GB SSD | 100Mbps |
| æµ‹è¯•ç¯å¢ƒ | 4æ ¸ | 8GB | 100GB SSD | 1Gbps |
| ç”Ÿäº§ç¯å¢ƒ | 8æ ¸ | 16GB | 200GB SSD | 1Gbps |

### 2.2 è½¯ä»¶è¦æ±‚

| è½¯ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| JDK | 17+ | è¿è¡Œç¯å¢ƒ |
| PostgreSQL | 15+ | æ•°æ®åº“ |
| Redis | 7.x | ç¼“å­˜ |
| Nacos | 2.x | é…ç½®ä¸­å¿ƒ |
| Maven | 3.8+ | æ„å»ºå·¥å…· |
| Docker | 20.10+ | å®¹å™¨åŒ–ï¼ˆå¯é€‰ï¼‰ |

---

## ä¸‰ã€éƒ¨ç½²æ¶æ„

### 3.1 æ¶æ„å›¾

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Nginx     â”‚
                    â”‚   (80/443)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                         â”‚
        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚   Gateway  â”‚           â”‚   Gateway  â”‚
        â”‚   :8080    â”‚           â”‚   :8081    â”‚
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â”‚                         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  qooerp-project         â”‚
              â”‚  :8093                  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚PostgreSQLâ”‚     â”‚   Redis   â”‚    â”‚  Nacos    â”‚
    â”‚ :5432    â”‚     â”‚   :6379   â”‚    â”‚ :8848     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ç«¯å£è¯´æ˜

| ç»„ä»¶ | ç«¯å£ | åè®® | è¯´æ˜ |
|------|------|------|------|
| qooerp-project | 8093 | HTTP | åº”ç”¨æœåŠ¡ |
| PostgreSQL | 5432 | TCP | æ•°æ®åº“ |
| Redis | 6379 | TCP | ç¼“å­˜ |
| Nacos | 8848 | HTTP | é…ç½®ä¸­å¿ƒ |

---

## å››ã€æ•°æ®åº“éƒ¨ç½²

### 4.1 æ•°æ®åº“åˆå§‹åŒ–

```bash
# 1. åˆ›å»ºæ•°æ®åº“
createdb -U postgres qooerp_project

# 2. åˆ›å»ºç”¨æˆ·
createuser -U postgres qooerp_project -P

# 3. æˆæƒ
psql -U postgres -c "GRANT ALL PRIVILEGES ON DATABASE qooerp_project TO qooerp_project;"

# 4. æ‰§è¡Œå»ºè¡¨è„šæœ¬
psql -U qooerp_project -d qooerp_project -f docs/05-æ•°æ®åº“è„šæœ¬.sql
```

### 4.2 æ•°æ®åº“é…ç½®

```yaml
# application-prod.yml
spring:
  datasource:
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://localhost:5432/qooerp_project
    username: qooerp_project
    password: ${DB_PASSWORD}
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
```

### 4.3 æ•°æ®åº“ä¼˜åŒ–

```sql
-- æ·»åŠ ç´¢å¼•
CREATE INDEX idx_project_status ON project(status);
CREATE INDEX idx_project_manager ON project(manager_id);
CREATE INDEX idx_task_project ON project_task(project_id);
CREATE INDEX idx_task_assignee ON project_task(assignee_id);
CREATE INDEX idx_task_status ON project_task(status);
CREATE INDEX idx_task_priority ON project_task(priority);
CREATE INDEX idx_milestone_project ON project_milestone(project_id);
CREATE INDEX idx_member_project ON project_member(project_id);
CREATE INDEX idx_comment_entity ON project_comment(entity_type, entity_id);
CREATE INDEX idx_attachment_project ON project_attachment(project_id);
CREATE INDEX idx_time_log_task ON project_time_log(task_id);
```

---

## äº”ã€åº”ç”¨éƒ¨ç½²

### 5.1 æ„å»ºåº”ç”¨

```bash
# 1. ç¼–è¯‘æ‰“åŒ…
cd qooerp-project
mvn clean package -DskipTests

# 2. æŸ¥çœ‹ç”Ÿæˆçš„jaråŒ…
ls -lh qooerp-project-start/target/qooerp-project-start-*.jar
```

### 5.2 é…ç½®æ–‡ä»¶

#### å¼€å‘ç¯å¢ƒé…ç½® (application-dev.yml)

```yaml
server:
  port: 8093

spring:
  application:
    name: qooerp-project
  profiles:
    active: dev
  cloud:
    nacos:
      server-addr: localhost:8848
      discovery:
        namespace: dev
      config:
        namespace: dev
        file-extension: yml
        shared-configs:
          - data-id: qooerp-common.yml
            refresh: true

  datasource:
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://localhost:5432/qooerp_project
    username: qooerp_project
    password: qooerp_project_dev

  data:
    redis:
      host: localhost
      port: 6379
      password:
      database: 0
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0

mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

logging:
  level:
    com.qoobot.qooerp.project: DEBUG
    com.qoobot.qooerp.project.mapper: DEBUG
```

#### ç”Ÿäº§ç¯å¢ƒé…ç½® (application-prod.yml)

```yaml
server:
  port: 8093
  tomcat:
    max-threads: 200
    accept-count: 100
    min-spare-threads: 10

spring:
  application:
    name: qooerp-project
  profiles:
    active: prod
  cloud:
    nacos:
      server-addr: nacos-prod.example.com:8848
      discovery:
        namespace: prod
      config:
        namespace: prod
        file-extension: yml

  datasource:
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://prod-db.example.com:5432/qooerp_project
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

  data:
    redis:
      host: prod-redis.example.com
      port: 6379
      password: ${REDIS_PASSWORD}
      database: 0
      lettuce:
        pool:
          max-active: 20
          max-idle: 10
          min-idle: 5

mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true

logging:
  level:
    root: INFO
    com.qoobot.qooerp.project: INFO
  file:
    name: /var/log/qooerp/project.log
    max-size: 100MB
    max-history: 30
```

### 5.3 å¯åŠ¨åº”ç”¨

```bash
# å¼€å‘ç¯å¢ƒå¯åŠ¨
java -jar qooerp-project-start/target/qooerp-project-start-*.jar \
  --spring.profiles.active=dev

# ç”Ÿäº§ç¯å¢ƒå¯åŠ¨ï¼ˆå¸¦JVMå‚æ•°ï¼‰
java -server \
  -Xms2g -Xmx2g \
  -XX:+UseG1GC \
  -XX:MaxGCPauseMillis=200 \
  -XX:+HeapDumpOnOutOfMemoryError \
  -XX:HeapDumpPath=/var/log/qooerp/heapdump.hprof \
  -jar qooerp-project-start/target/qooerp-project-start-*.jar \
  --spring.profiles.active=prod
```

### 5.4 Docker éƒ¨ç½²

#### Dockerfile

```dockerfile
FROM openjdk:17-jdk-slim

LABEL maintainer="qooerp"
LABEL description="QooERP Project Management Module"

WORKDIR /app

# å¤åˆ¶jaråŒ…
COPY qooerp-project-start/target/qooerp-project-start-*.jar app.jar

# åˆ›å»ºæ—¥å¿—ç›®å½•
RUN mkdir -p /var/log/qooerp

# æš´éœ²ç«¯å£
EXPOSE 8093

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=60s --retries=3 \
  CMD curl -f http://localhost:8093/actuator/health | exit 1

# å¯åŠ¨åº”ç”¨
ENTRYPOINT ["java", "-server", "-Xms1g", "-Xmx1g", "-jar", "app.jar"]
```

#### docker-compose.yml

```yaml
version: '3.8'

services:
  qooerp-project:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: qooerp-project
    ports:
      - "8093:8093"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - DB_USERNAME=qooerp_project
      - DB_PASSWORD=${DB_PASSWORD}
      - REDIS_PASSWORD=${REDIS_PASSWORD}
      - NACOS_SERVER=nacos:8848
    depends_on:
      - postgres
      - redis
      - nacos
    networks:
      - qooerp-network
    restart: unless-stopped
    volumes:
      - /var/log/qooerp:/var/log/qooerp

  postgres:
    image: postgres:15-alpine
    container_name: qooerp-postgres
    ports:
      - "5432:5432"
    environment:
      - POSTGRES_DB=qooerp_project
      - POSTGRES_USER=qooerp_project
      - POSTGRES_PASSWORD=${DB_PASSWORD}
    volumes:
      - postgres-data:/var/lib/postgresql/data
      - ./docs/05-æ•°æ®åº“è„šæœ¬.sql:/docker-entrypoint-initdb.d/init.sql
    networks:
      - qooerp-network
    restart: unless-stopped

  redis:
    image: redis:7-alpine
    container_name: qooerp-redis
    ports:
      - "6379:6379"
    command: redis-server --requirepass ${REDIS_PASSWORD}
    volumes:
      - redis-data:/data
    networks:
      - qooerp-network
    restart: unless-stopped

  nacos:
    image: nacos/nacos-server:v2.2.3
    container_name: qooerp-nacos
    ports:
      - "8848:8848"
      - "9848:9848"
    environment:
      - MODE=standalone
      - SPRING_DATASOURCE_PLATFORM=embedded
    volumes:
      - nacos-data:/home/nacos/data
    networks:
      - qooerp-network
    restart: unless-stopped

volumes:
  postgres-data:
  redis-data:
  nacos-data:

networks:
  qooerp-network:
    driver: bridge
```

#### å¯åŠ¨å‘½ä»¤

```bash
# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
cat > .env << EOF
DB_PASSWORD=qooerp_project_2026
REDIS_PASSWORD=redis_2026
EOF

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f qooerp-project
```

---

## å…­ã€ç›‘æ§å‘Šè­¦

### 6.1 å¥åº·æ£€æŸ¥

```bash
# åº”ç”¨å¥åº·æ£€æŸ¥
curl http://localhost:8093/actuator/health

# é¢„æœŸå“åº”
{
  "status": "UP",
  "components": {
    "db": {
      "status": "UP",
      "details": {
        "database": "PostgreSQL",
        "validationQuery": "isValid()"
      }
    },
    "redis": {
      "status": "UP"
    },
    "diskSpace": {
      "status": "UP",
      "details": {
        "total": 500GB,
        "free": 300GB,
        "threshold": 10MB
      }
    }
  }
}
```

### 6.2 ç›‘æ§æŒ‡æ ‡

#### åº”ç”¨æŒ‡æ ‡

| æŒ‡æ ‡ | è¯´æ˜ | é˜ˆå€¼ |
|------|------|------|
| JVM Heap Used | å †å†…å­˜ä½¿ç”¨ç‡ | < 80% |
| JVM GC Time | GCæ—¶é—´å æ¯” | < 5% |
| Thread Count | çº¿ç¨‹æ•° | < 200 |
| Request Count | è¯·æ±‚æ•° | - |
| Error Count | é”™è¯¯æ•° | < 1/min |
| Response Time | å“åº”æ—¶é—´ (P95) | < 500ms |
| DB Connection Pool | æ•°æ®åº“è¿æ¥æ± ä½¿ç”¨ç‡ | < 80% |

#### ä¸šåŠ¡æŒ‡æ ‡

| æŒ‡æ ‡ | è¯´æ˜ | ç›‘æ§é¢‘ç‡ |
|------|------|---------|
| Active Projects | æ´»è·ƒé¡¹ç›®æ•° | æ¯5åˆ†é’Ÿ |
| Total Tasks | ä»»åŠ¡æ€»æ•° | æ¯5åˆ†é’Ÿ |
| Completed Tasks | å®Œæˆä»»åŠ¡æ•° | æ¯5åˆ†é’Ÿ |
| Avg Project Progress | å¹³å‡é¡¹ç›®è¿›åº¦ | æ¯å°æ—¶ |
| Overdue Tasks | é€¾æœŸä»»åŠ¡æ•° | æ¯å°æ—¶ |

### 6.3 å‘Šè­¦è§„åˆ™

```yaml
# Prometheus å‘Šè­¦è§„åˆ™ç¤ºä¾‹
groups:
  - name: qooerp-project-alerts
    interval: 30s
    rules:
      - alert: HighHeapUsage
        expr: jvm_memory_used_bytes{area="heap"} / jvm_memory_max_bytes{area="heap"} > 0.8
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High heap memory usage"

      - alert: HighErrorRate
        expr: rate(http_server_requests_seconds_count{status=~"5.."}[5m]) > 0.1
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "High error rate"

      - alert: SlowResponseTime
        expr: histogram_quantile(0.95, rate(http_server_requests_seconds_bucket[5m])) > 0.5
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Slow response time (P95 > 500ms)"

      - alert: DatabaseDown
        expr: up{job="qooerp-project-db"} == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "Database is down"

      - alert: RedisDown
        expr: up{job="qooerp-project-redis"} == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "Redis is down"
```

### 6.4 æ—¥å¿—ç®¡ç†

#### æ—¥å¿—çº§åˆ«

| ç¯å¢ƒ | æ—¥å¿—çº§åˆ« | è¯´æ˜ |
|------|---------|------|
| å¼€å‘ç¯å¢ƒ | DEBUG | è¯¦ç»†è°ƒè¯•ä¿¡æ¯ |
| æµ‹è¯•ç¯å¢ƒ | INFO | ä¸€èˆ¬ä¿¡æ¯ |
| ç”Ÿäº§ç¯å¢ƒ | INFO | ä¸€èˆ¬ä¿¡æ¯ï¼ŒERRORå¼‚å¸¸ |

#### æ—¥å¿—æ ¼å¼

```xml
<!-- logback-spring.xml -->
<configuration>
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>/var/log/qooerp/project.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>/var/log/qooerp/project.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </root>
</configuration>
```

---

## ä¸ƒã€å¤‡ä»½ä¸æ¢å¤

### 7.1 æ•°æ®åº“å¤‡ä»½

```bash
# å¤‡ä»½æ•°æ®åº“
pg_dump -U qooerp_project -h localhost -p 5432 qooerp_project > backup_$(date +%Y%m%d_%H%M%S).sql

# å‹ç¼©å¤‡ä»½
gzip backup_$(date +%Y%m%d_%H%M%S).sql

# å®šæ—¶å¤‡ä»½ï¼ˆcrontabï¼‰
0 2 * * * /usr/bin/pg_dump -U qooerp_project qooerp_project | gzip > /backup/qooerp_project_$(date +\%Y\%m\%d).sql.gz
```

### 7.2 æ•°æ®åº“æ¢å¤

```bash
# è§£å‹å¤‡ä»½
gunzip backup_20260218_020000.sql.gz

# æ¢å¤æ•°æ®åº“
psql -U qooerp_project -h localhost -p 5432 qooerp_project < backup_20260218_020000.sql
```

### 7.3 Redis å¤‡ä»½

```bash
# æ‰‹åŠ¨ä¿å­˜
redis-cli -a password SAVE

# å¤åˆ¶RDBæ–‡ä»¶
cp /var/lib/redis/dump.rdb /backup/redis_dump_$(date +%Y%m%d_%H%M%S).rdb
```

---

## å…«ã€å®‰å…¨é…ç½®

### 8.1 æ•°æ®åº“å®‰å…¨

```bash
# é™åˆ¶è¿œç¨‹è®¿é—®
# ä¿®æ”¹ pg_hba.conf
host    qooerp_project   qooerp_project   192.168.1.0/24   md5

# å¯ç”¨SSL
# ä¿®æ”¹ postgresql.conf
ssl = on
ssl_cert_file = 'server.crt'
ssl_key_file = 'server.key'
```

### 8.2 åº”ç”¨å®‰å…¨

```yaml
# ç¦ç”¨æ•æ„Ÿç«¯ç‚¹æš´éœ²
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when-authorized

# å¯ç”¨HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
server:
  ssl:
    enabled: true
    key-store: classpath:keystore.p12
    key-store-password: ${KEYSTORE_PASSWORD}
    key-store-type: PKCS12
```

---

## ä¹ã€æ•…éšœæ’æŸ¥

### 9.1 å¸¸è§é—®é¢˜

| é—®é¢˜ | ç°è±¡ | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| åº”ç”¨å¯åŠ¨å¤±è´¥ | ç«¯å£è¢«å ç”¨ | `lsof -i :8093`ï¼Œæ€æ‰å ç”¨è¿›ç¨‹ |
| æ•°æ®åº“è¿æ¥å¤±è´¥ | è¿æ¥è¶…æ—¶ | æ£€æŸ¥æ•°æ®åº“æœåŠ¡ã€ç½‘ç»œã€é˜²ç«å¢™ |
| å†…å­˜æº¢å‡º | OutOfMemoryError | å¢åŠ JVMå †å†…å­˜ï¼Œåˆ†æheapdump |
| å“åº”ç¼“æ…¢ | P95 > 500ms | æ£€æŸ¥æ…¢æŸ¥è¯¢ï¼Œä¼˜åŒ–SQLï¼Œæ·»åŠ ç¼“å­˜ |
| Redisè¿æ¥å¤±è´¥ | ç¼“å­˜ä¸å¯ç”¨ | æ£€æŸ¥RedisæœåŠ¡ã€å¯†ç ã€ç½‘ç»œ |

### 9.2 æ’æŸ¥å‘½ä»¤

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f /var/log/qooerp/project.log

# æŸ¥çœ‹JVMè¿›ç¨‹
jps -lvm

# æŸ¥çœ‹JVMå †å†…å­˜
jmap -heap <pid>

# æŸ¥çœ‹JVMçº¿ç¨‹
jstack <pid>

# æŠ“å–ç½‘ç»œåŒ…
tcpdump -i any -s 0 -w capture.pcap port 8093

# æŸ¥çœ‹æ•°æ®åº“è¿æ¥
psql -U qooerp_project -c "SELECT * FROM pg_stat_activity WHERE datname='qooerp_project';"

# æŸ¥çœ‹Redisè¿æ¥
redis-cli CLIENT LIST
```

---

## åã€å‡çº§ç»´æŠ¤

### 10.1 ç°åº¦å‘å¸ƒ

```bash
# 1. éƒ¨ç½²æ–°ç‰ˆæœ¬åˆ°æ–°èŠ‚ç‚¹
docker-compose up -d --scale qooerp-project=2

# 2. è§‚å¯Ÿæ–°èŠ‚ç‚¹æ—¥å¿—
docker-compose logs -f qooerp-project

# 3. é€æ­¥åˆ‡æ¢æµé‡ï¼ˆé€šè¿‡Nginxï¼‰

# 4. åœæ­¢æ—§èŠ‚ç‚¹
docker-compose stop qooerp-project
```

### 10.2 å›æ»šæ–¹æ¡ˆ

```bash
# 1. åœæ­¢æ–°ç‰ˆæœ¬
docker-compose stop qooerp-project

# 2. æ¢å¤æ—§ç‰ˆæœ¬
docker run -d --name qooerp-project-old qooerp-project:old-version

# 3. å¦‚éœ€è¦ï¼Œæ¢å¤æ•°æ®åº“
psql -U qooerp_project qooerp_project < backup_old.sql
```

---

## åä¸€ã€æ£€æŸ¥æ¸…å•

### 11.1 éƒ¨ç½²å‰æ£€æŸ¥

- [ ] æ•°æ®åº“å·²åˆ›å»ºå¹¶åˆå§‹åŒ–
- [ ] RedisæœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] Nacosé…ç½®ä¸­å¿ƒæ­£å¸¸è¿è¡Œ
- [ ] é…ç½®æ–‡ä»¶æ­£ç¡®é…ç½®
- [ ] ç½‘ç»œè¿é€šæ€§æ­£å¸¸
- [ ] é˜²ç«å¢™è§„åˆ™å·²é…ç½®
- [ ] ç£ç›˜ç©ºé—´å……è¶³ï¼ˆ> 20GBï¼‰
- [ ] å†…å­˜å……è¶³ï¼ˆ> 8GBï¼‰

### 11.2 éƒ¨ç½²åéªŒè¯

- [ ] åº”ç”¨è¿›ç¨‹æ­£å¸¸è¿è¡Œ
- [ ] å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] Redisè¿æ¥æ­£å¸¸
- [ ] Nacosæ³¨å†ŒæˆåŠŸ
- [ ] æ¥å£å“åº”æ­£å¸¸
- [ ] æ—¥å¿—è¾“å‡ºæ­£å¸¸
- [ ] ç›‘æ§æŒ‡æ ‡æ­£å¸¸

---

## åäºŒã€è”ç³»æ–¹å¼

| è§’è‰² | å§“å | é‚®ç®± | ç”µè¯ |
|------|------|------|------|
| æŠ€æœ¯è´Ÿè´£äºº | - | - | - |
| è¿ç»´è´Ÿè´£äºº | - | - | - |
| DBA | - | - | - |

---

*æ–‡æ¡£ç»´æŠ¤ï¼šè¯·ä¿æŒæ­¤æ–‡æ¡£çš„åŠæ—¶æ›´æ–°ï¼Œç¡®ä¿éƒ¨ç½²ä¿¡æ¯çš„å‡†ç¡®æ€§*

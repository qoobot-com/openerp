# QooERP 销售管理 - 应用设计文档

> 版本：v1.0
> 创建日期：2026-02-17

---

## 一、核心实体设计

### 1.1 SalesOrder（销售订单实体）

```java
package com.qoobot.qooerp.sales.order.domain;

import com.qoobot.qooerp.common.core.entity.BaseEntity;
import lombok.Data;
import lombok.EqualsAndHashCode;
import java.math.BigDecimal;
import java.time.LocalDate;

/**
 * 销售订单实体
 */
@Data
@EqualsAndHashCode(callSuper = true)
public class SalesOrder extends BaseEntity {
    
    /** 订单编号 */
    private String orderCode;
    
    /** 客户ID */
    private Long customerId;
    
    /** 客户名称 */
    private String customerName;
    
    /** 订单日期 */
    private LocalDate orderDate;
    
    /** 交货日期 */
    private LocalDate deliveryDate;
    
    /** 订单金额 */
    private BigDecimal orderAmount;
    
    /** 折扣金额 */
    private BigDecimal discountAmount;
    
    /** 实付金额 */
    private BigDecimal payableAmount;
    
    /** 订单状态 */
    private String orderStatus; // DRAFT, PENDING, APPROVED, SHIPPED, COMPLETED, CANCELLED
    
    /** 订单类型 */
    private String orderType; // NORMAL, RETURN, EXCHANGE
    
    /** 销售员ID */
    private Long salespersonId;
    
    /** 销售员姓名 */
    private String salespersonName;
    
    /** 仓库ID */
    private Long warehouseId;
    
    /** 仓库名称 */
    private String warehouseName;
    
    /** 备注 */
    private String remark;
}
```

### 1.2 SalesOrderDetail（订单明细实体）

```java
package com.qoobot.qooerp.sales.order.domain;

import com.qoobot.qooerp.common.core.entity.BaseEntity;
import lombok.Data;
import lombok.EqualsAndHashCode;
import java.math.BigDecimal;

/**
 * 销售订单明细实体
 */
@Data
@EqualsAndHashCode(callSuper = true)
public class SalesOrderDetail extends BaseEntity {
    
    /** 订单ID */
    private Long orderId;
    
    /** 物料ID */
    private Long materialId;
    
    /** 物料编码 */
    private String materialCode;
    
    /** 物料名称 */
    private String materialName;
    
    /** 规格型号 */
    private String specification;
    
    /** 计量单位 */
    private String unit;
    
    /** 数量 */
    private BigDecimal quantity;
    
    /** 单价 */
    private BigDecimal unitPrice;
    
    /** 金额 */
    private BigDecimal amount;
    
    /** 折扣率 */
    private BigDecimal discountRate;
    
    /** 折扣金额 */
    private BigDecimal discountAmount;
    
    /** 实付金额 */
    private BigDecimal payableAmount;
    
    /** 已发货数量 */
    private BigDecimal shippedQuantity;
    
    /** 备注 */
    private String remark;
}
```

---

## 二、核心服务接口

```java
public interface SalesOrderService {
    Result<Long> createOrder(OrderDTO orderDTO);
    Result<Void> approveOrder(Long orderId, Long approverId);
    Result<Void> cancelOrder(Long orderId, String reason);
    Result<OrderDTO> getOrder(Long orderId);
    Result<PageResult<OrderDTO>> queryOrders(OrderQueryDTO queryDTO);
    Result<Long> createDelivery(DeliveryDTO deliveryDTO);
    Result<Void> shipOrder(Long orderId);
    Result<Long> createReturn(ReturnDTO returnDTO);
}
```

---

*文档维护：请保持此文档的及时更新*
